(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[951],{5875:(e,t,r)=>{var n=r(7358);function i(){let e;return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function o(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)}function s(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}}function a(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}function l(){try{return localStorage}catch(e){}}t.formatArgs=o,t.save=s,t.load=a,t.useColors=i,t.storage=l(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(3332)(t);let{formatters:u}=e.exports;u.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},3332:(e,t,r)=>{function n(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return n.colors[Math.abs(t)%n.colors.length]}function n(e){let t,r,o;let s=null;function a(...e){if(!a.enabled)return;let r=a,i=Number(new Date),o=i-(t||i);r.diff=o,r.prev=t,r.curr=i,t=i,e[0]=n.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(t,i)=>{if("%%"===t)return"%";s++;let o=n.formatters[i];if("function"==typeof o){let n=e[s];t=o.call(r,n),e.splice(s,1),s--}return t}),n.formatArgs.call(r,e),(r.log||n.log).apply(r,e)}return a.namespace=e,a.useColors=n.useColors(),a.color=n.selectColor(e),a.extend=i,a.destroy=n.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(r!==n.namespaces&&(r=n.namespaces,o=n.enabled(e)),o),set:e=>{s=e}}),"function"==typeof n.init&&n.init(a),a}function i(e,t){let r=n(this.namespace+(void 0===t?":":t)+e);return r.log=this.log,r}function o(e){for(let t of(n.save(e),n.namespaces=e,n.names=[],n.skips=[],("string"==typeof e?e:"").trim().replace(" ",",").split(",").filter(Boolean)))"-"===t[0]?n.skips.push(t.slice(1)):n.names.push(t)}function s(e,t){let r=0,n=0,i=-1,o=0;for(;r<e.length;)if(n<t.length&&(t[n]===e[r]||"*"===t[n]))"*"===t[n]?(i=n,o=r):r++,n++;else{if(-1===i)return!1;n=i+1,r=++o}for(;n<t.length&&"*"===t[n];)n++;return n===t.length}function a(){let e=[...n.names,...n.skips.map(e=>"-"+e)].join(",");return n.enable(""),e}function l(e){for(let t of n.skips)if(s(e,t))return!1;for(let t of n.names)if(s(e,t))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.debug=n,n.default=n,n.coerce=u,n.disable=a,n.enable=o,n.enabled=l,n.humanize=r(3949),n.destroy=f,Object.keys(e).forEach(t=>{n[t]=e[t]}),n.names=[],n.skips=[],n.formatters={},n.selectColor=t,n.enable(n.load()),n}e.exports=n},7751:(e,t,r)=>{let{bech32:n,hex:i,utf8:o}=r(9648),s={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},a={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},l={bech32:"tbs",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},u={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},f={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},c=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],h={m:BigInt(1e3),u:BigInt(1e6),n:BigInt(1e9),p:BigInt(1e12)},d=BigInt("2100000000000000000"),p=BigInt(1e11),g={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},y={};for(let e=0,t=Object.keys(g);e<t.length;e++){let r=t[e];y[g[t[e]].toString()]=r}let b={1:e=>i.encode(n.fromWordsUnsafe(e)),16:e=>i.encode(n.fromWordsUnsafe(e)),13:e=>o.encode(n.fromWordsUnsafe(e)),19:e=>i.encode(n.fromWordsUnsafe(e)),23:e=>i.encode(n.fromWordsUnsafe(e)),27:e=>i.encode(n.fromWordsUnsafe(e)),6:m,24:m,3:E,5:v};function w(e){return t=>({tagCode:parseInt(e),words:n.encode("unknown",t,Number.MAX_SAFE_INTEGER)})}function m(e){return e.reverse().reduce((e,t,r)=>e+t*Math.pow(32,r),0)}function E(e){let t,r,o,s,a;let l=[],u=n.fromWordsUnsafe(e);for(;u.length>0;)t=i.encode(u.slice(0,33)),r=i.encode(u.slice(33,41)),o=parseInt(i.encode(u.slice(41,45)),16),s=parseInt(i.encode(u.slice(45,49)),16),a=parseInt(i.encode(u.slice(49,51)),16),u=u.slice(51),l.push({pubkey:t,short_channel_id:r,fee_base_msat:o,fee_proportional_millionths:s,cltv_expiry_delta:a});return l}function v(e){let t=e.slice().reverse().map(e=>[!!(1&e),!!(2&e),!!(4&e),!!(8&e),!!(16&e)]).reduce((e,t)=>e.concat(t),[]);for(;t.length<2*c.length;)t.push(!1);let r={};c.forEach((e,n)=>{let i;i=t[2*n]?"required":t[2*n+1]?"supported":"unsupported",r[e]=i});let n=t.slice(2*c.length);return r.extra_bits={start_bit:2*c.length,bits:n,has_required:n.reduce((e,t,r)=>r%2!=0?e||!1:e||t,!1)},r}function x(e,t){let r,n;if(e.slice(-1).match(/^[munp]$/))r=e.slice(-1),n=e.slice(0,-1);else if(e.slice(-1).match(/^[^munp0-9]$/))throw Error("Not a valid multiplier for the amount");else n=e;if(!n.match(/^\d+$/))throw Error("Not a valid human readable amount");let i=BigInt(n),o=r?i*p/h[r]:i*p;if("p"===r&&i%BigInt(10)!==BigInt(0)||o>d)throw Error("Amount is outside of valid range");return t?o.toString():o}function A(e,t){let r,o,c,h,d,p;if("string"!=typeof e)throw Error("Lightning Payment Request must be string");if("ln"!==e.slice(0,2).toLowerCase())throw Error("Not a proper lightning payment request");let E=[],v=n.decode(e,Number.MAX_SAFE_INTEGER);e=e.toLowerCase();let A=v.prefix,_=v.words,B=e.slice(A.length+1),k=_.slice(-104);_=_.slice(0,-104);let C=A.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(C&&!C[2]&&(C=A.match(/^ln(\S+)$/)),!C)throw Error("Not a proper lightning payment request");E.push({name:"lightning_network",letters:"ln"});let I=C[1];if(t){if(void 0===t.bech32||void 0===t.pubKeyHash||void 0===t.scriptHash||!Array.isArray(t.validWitnessVersions))throw Error("Invalid network");r=t}else switch(I){case s.bech32:r=s;break;case a.bech32:r=a;break;case l.bech32:r=l;break;case u.bech32:r=u;break;case f.bech32:r=f}if(!r||r.bech32!==I)throw Error("Unknown coin bech32 prefix");E.push({name:"coin_network",letters:I,value:r});let S=C[2];S?(o=x(S+C[3],!0),E.push({name:"amount",letters:C[2]+C[3],value:o})):o=null,E.push({name:"separator",letters:"1"});let O=m(_.slice(0,7));for(_=_.slice(7),E.push({name:"timestamp",letters:B.slice(0,7),value:O}),B=B.slice(7);_.length>0;){let e=_[0].toString();c=y[e]||"unknown_tag",h=b[e]||w(e),d=m((_=_.slice(1)).slice(0,2)),p=(_=_.slice(2)).slice(0,d),_=_.slice(d),E.push({name:c,tag:B[0],letters:B.slice(0,3+d),value:h(p)}),B=B.slice(3+d)}E.push({name:"signature",letters:B.slice(0,104),value:i.encode(n.fromWordsUnsafe(k))}),B=B.slice(104),E.push({name:"checksum",letters:B});let U={paymentRequest:e,sections:E,get expiry(){let e=E.find(e=>"expiry"===e.name);if(e)return N("timestamp")+e.value},get route_hints(){return E.filter(e=>"route_hint"===e.name).map(e=>e.value)}};for(let e in g)"route_hint"!==e&&Object.defineProperty(U,e,{get:()=>N(e)});return U;function N(e){let t=E.find(t=>t.name===e);return t?t.value:void 0}}e.exports={decode:A,hrpToMillisat:x}},9648:(e,t)=>{"use strict";function r(e){if(!Number.isSafeInteger(e))throw Error(`Wrong integer: ${e}`)}function n(...e){let t=(e,t)=>r=>e(t(r));return{encode:Array.from(e).reverse().reduce((e,r)=>e?t(e,r.encode):r.encode,void 0),decode:e.reduce((e,r)=>e?t(e,r.decode):r.decode,void 0)}}function i(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw Error("alphabet.encode input should be an array of numbers");return t.map(t=>{if(r(t),t<0||t>=e.length)throw Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]})},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw Error("alphabet.decode input should be array of strings");return t.map(t=>{if("string"!=typeof t)throw Error(`alphabet.decode: not string element=${t}`);let r=e.indexOf(t);if(-1===r)throw Error(`Unknown letter: "${t}". Allowed: ${e}`);return r})}}}function o(e=""){if("string"!=typeof e)throw Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw Error("join.decode input should be string");return t.split(e)}}}function s(e,t="="){if(r(e),"string"!=typeof t)throw Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw Error(`padding.encode: non-string input=${e}`);for(;r.length*e%8;)r.push(t);return r},decode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw Error(`padding.decode: non-string input=${e}`);let n=r.length;if(n*e%8)throw Error("Invalid padding: string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if(!((n-1)*e%8))throw Error("Invalid padding: string has too much padding");return r.slice(0,n)}}}function a(e){if("function"!=typeof e)throw Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function l(e,t,n){if(t<2)throw Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw Error("convertRadix: data should be array");if(!e.length)return[];let i=0,o=[],s=Array.from(e);for(s.forEach(e=>{if(r(e),e<0||e>=t)throw Error(`Wrong integer: ${e}`)});;){let e=0,r=!0;for(let o=i;o<s.length;o++){let a=s[o],l=t*e+a;if(!Number.isSafeInteger(l)||t*e/t!==e||l-a!=t*e||(e=l%n,s[o]=Math.floor(l/n),!Number.isSafeInteger(s[o])||s[o]*n+e!==l))throw Error("convertRadix: carry overflow");r&&(s[o]?r=!1:i=o)}if(o.push(e),r)break}for(let t=0;t<e.length-1&&0===e[t];t++)o.push(0);return o.reverse()}Object.defineProperty(t,"__esModule",{value:!0}),t.bytes=t.stringToBytes=t.str=t.bytesToString=t.hex=t.utf8=t.bech32m=t.bech32=t.base58check=t.base58xmr=t.base58xrp=t.base58flickr=t.base58=t.base64url=t.base64=t.base32crockford=t.base32hex=t.base32=t.base16=t.utils=t.assertNumber=void 0,t.assertNumber=r;let u=(e,t)=>t?u(t,e%t):e,f=(e,t)=>e+(t-u(e,t));function c(e,t,n,i){if(!Array.isArray(e))throw Error("convertRadix2: data should be array");if(t<=0||t>32)throw Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw Error(`convertRadix2: wrong to=${n}`);if(f(t,n)>32)throw Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${f(t,n)}`);let o=0,s=0,a=2**n-1,l=[];for(let i of e){if(r(i),i>=2**t)throw Error(`convertRadix2: invalid data word=${i} from=${t}`);if(o=o<<t|i,s+t>32)throw Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=n;s-=n)l.push((o>>s-n&a)>>>0);o&=2**s-1}if(o=o<<n-s&a,!i&&s>=t)throw Error("Excess padding");if(!i&&o)throw Error(`Non-zero padding: ${o}`);return i&&s>0&&l.push(o>>>0),l}function h(e){return r(e),{encode:t=>{if(!(t instanceof Uint8Array))throw Error("radix.encode input should be Uint8Array");return l(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw Error("radix.decode input should be array of strings");return Uint8Array.from(l(t,e,256))}}}function d(e,t=!1){if(r(e),e<=0||e>32)throw Error("radix2: bits should be in (0..32]");if(f(8,e)>32||f(e,8)>32)throw Error("radix2: carry overflow");return{encode:r=>{if(!(r instanceof Uint8Array))throw Error("radix2.encode input should be Uint8Array");return c(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw Error("radix2.decode input should be array of strings");return Uint8Array.from(c(r,e,8,t))}}}function p(e){if("function"!=typeof e)throw Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(e){}}}function g(e,t){if(r(e),"function"!=typeof t)throw Error("checksum fn should be function");return{encode(r){if(!(r instanceof Uint8Array))throw Error("checksum.encode: input should be Uint8Array");let n=t(r).slice(0,e),i=new Uint8Array(r.length+e);return i.set(r),i.set(n,r.length),i},decode(r){if(!(r instanceof Uint8Array))throw Error("checksum.decode: input should be Uint8Array");let n=r.slice(0,-e),i=t(n).slice(0,e),o=r.slice(-e);for(let t=0;t<e;t++)if(i[t]!==o[t])throw Error("Invalid checksum");return n}}}t.utils={alphabet:i,chain:n,checksum:g,radix:h,radix2:d,join:o,padding:s},t.base16=n(d(4),i("0123456789ABCDEF"),o("")),t.base32=n(d(5),i("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),s(5),o("")),t.base32hex=n(d(5),i("0123456789ABCDEFGHIJKLMNOPQRSTUV"),s(5),o("")),t.base32crockford=n(d(5),i("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),o(""),a(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),t.base64=n(d(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),s(6),o("")),t.base64url=n(d(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),s(6),o(""));let y=e=>n(h(58),i(e),o(""));t.base58=y("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),t.base58flickr=y("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),t.base58xrp=y("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");let b=[0,2,3,5,6,7,9,10,11];t.base58xmr={encode(e){let r="";for(let n=0;n<e.length;n+=8){let i=e.subarray(n,n+8);r+=t.base58.encode(i).padStart(b[i.length],"1")}return r},decode(e){let r=[];for(let n=0;n<e.length;n+=11){let i=e.slice(n,n+11),o=b.indexOf(i.length),s=t.base58.decode(i);for(let e=0;e<s.length-o;e++)if(0!==s[e])throw Error("base58xmr: wrong padding");r=r.concat(Array.from(s.slice(s.length-o)))}return Uint8Array.from(r)}};let w=e=>n(g(4,t=>e(e(t))),t.base58);t.base58check=w;let m=n(i("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),o("")),E=[0x3b6a57b2,0x26508e6d,0x1ea119fa,0x3d4233dd,0x2a1462b3];function v(e){let t=e>>25,r=(0x1ffffff&e)<<5;for(let e=0;e<E.length;e++)(t>>e&1)==1&&(r^=E[e]);return r}function x(e,t,r=1){let n=e.length,i=1;for(let t=0;t<n;t++){let r=e.charCodeAt(t);if(r<33||r>126)throw Error(`Invalid prefix (${e})`);i=v(i)^r>>5}i=v(i);for(let t=0;t<n;t++)i=v(i)^31&e.charCodeAt(t);for(let e of t)i=v(i)^e;for(let e=0;e<6;e++)i=v(i);return i^=r,m.encode(c([i%0x40000000],30,5,!1))}function A(e){let t="bech32"===e?1:0x2bc830a3,r=d(5),n=r.decode,i=r.encode,o=p(n);function s(e,r,n=90){if("string"!=typeof e)throw Error(`bech32.encode prefix should be string, not ${typeof e}`);if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw Error(`bech32.encode words should be array of numbers, not ${typeof r}`);let i=e.length+7+r.length;if(!1!==n&&i>n)throw TypeError(`Length ${i} exceeds limit ${n}`);return e=e.toLowerCase(),`${e}1${m.encode(r)}${x(e,r,t)}`}function a(e,r=90){if("string"!=typeof e)throw Error(`bech32.decode input should be string, not ${typeof e}`);if(e.length<8||!1!==r&&e.length>r)throw TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${r})`);let n=e.toLowerCase();if(e!==n&&e!==e.toUpperCase())throw Error("String must be lowercase or uppercase");let i=(e=n).lastIndexOf("1");if(0===i||-1===i)throw Error('Letter "1" must be present between prefix and data only');let o=e.slice(0,i),s=e.slice(i+1);if(s.length<6)throw Error("Data must be at least 6 characters long");let l=m.decode(s).slice(0,-6),u=x(o,l,t);if(!s.endsWith(u))throw Error(`Invalid checksum in ${e}: expected "${u}"`);return{prefix:o,words:l}}let l=p(a);function u(e){let{prefix:t,words:r}=a(e,!1);return{prefix:t,words:r,bytes:n(r)}}return{encode:s,decode:a,decodeToBytes:u,decodeUnsafe:l,fromWords:n,fromWordsUnsafe:o,toWords:i}}t.bech32=A("bech32"),t.bech32m=A("bech32m"),t.utf8={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},t.hex=n(d(4),i("0123456789abcdef"),o(""),a(e=>{if("string"!=typeof e||e.length%2)throw TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));let _={utf8:t.utf8,hex:t.hex,base16:t.base16,base32:t.base32,base64:t.base64,base64url:t.base64url,base58:t.base58,base58xmr:t.base58xmr},B=`Invalid encoding type. Available types: ${Object.keys(_).join(", ")}`,k=(e,t)=>{if("string"!=typeof e||!_.hasOwnProperty(e))throw TypeError(B);if(!(t instanceof Uint8Array))throw TypeError("bytesToString() expects Uint8Array");return _[e].encode(t)};t.bytesToString=k,t.str=t.bytesToString;let C=(e,t)=>{if(!_.hasOwnProperty(e))throw TypeError(B);if("string"!=typeof t)throw TypeError("stringToBytes() expects string");return _[e].decode(t)};t.stringToBytes=C,t.bytes=t.stringToBytes},3949:e=>{var t=1e3,r=6e4,n=36e5,i=864e5,o=6048e5,s=315576e5;function a(e){if(!((e=String(e)).length>100)){var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(a){var l=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*s;case"weeks":case"week":case"w":return l*o;case"days":case"day":case"d":return l*i;case"hours":case"hour":case"hrs":case"hr":case"h":return l*n;case"minutes":case"minute":case"mins":case"min":case"m":return l*r;case"seconds":case"second":case"secs":case"sec":case"s":return l*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}}}function l(e){var o=Math.abs(e);return o>=i?Math.round(e/i)+"d":o>=n?Math.round(e/n)+"h":o>=r?Math.round(e/r)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}function u(e){var o=Math.abs(e);return o>=i?f(e,o,i,"day"):o>=n?f(e,o,n,"hour"):o>=r?f(e,o,r,"minute"):o>=t?f(e,o,t,"second"):e+" ms"}function f(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return a(e);if("number"===r&&isFinite(e))return t.long?u(e):l(e);throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},3834:function(e,t,r){"use strict";var n=this&&this.__spreadArray||function(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0;var i=r(1167),o=r(3406),s=r(1977);function a(e,t,r,n,i,o){var s=this.events[e];if(s){if(0===s.length)return!1;if(s.argsNum<6)s.call(t,r,n,i,o);else{for(var a=Array(s.argsNum),l=0,u=a.length;l<u;++l)a[l]=arguments[l+1];s.call.apply(void 0,a)}return!0}return!1}function l(e,t,r,n,i,o){var s,a=this.events[e];if(void 0!==a){if(0===a.length)return!1;if(a.argsNum<6)a.call(t,r,n,i,o);else{s=Array(a.argsNum);for(var l=0,u=s.length;l<u;++l)s[l]=arguments[l+1];a.call.apply(void 0,s)}}var f=this.onceEvents[e];if(f){if("function"==typeof f){if(this.onceEvents[e]=void 0,arguments.length<6)f(t,r,n,i,o);else{if(void 0===s){s=Array(arguments.length-1);for(var l=0,u=s.length;l<u;++l)s[l]=arguments[l+1]}f.apply(void 0,s)}}else{var c=f;if(this.onceEvents[e]=void 0,arguments.length<6)for(var l=0;l<c.length;++l)c[l](t,r,n,i,o);else{if(void 0===s){s=Array(arguments.length-1);for(var l=0,u=s.length;l<u;++l)s[l]=arguments[l+1]}for(var l=0;l<c.length;++l)c[l].apply(void 0,s)}}return!0}return void 0!==a}var u=function(){function e(){this.events=(0,s.nullObj)(),this.onceEvents=(0,s.nullObj)(),this._symbolKeys=new Set,this.maxListeners=1/0}return Object.defineProperty(e.prototype,"_eventsCount",{get:function(){return this.eventNames().length},enumerable:!1,configurable:!0}),e}();function f(e,t){switch(this.emit===a&&(this.emit=l),typeof this.onceEvents[e]){case"undefined":this.onceEvents[e]=t,"symbol"==typeof e&&this._symbolKeys.add(e);break;case"function":this.onceEvents[e]=[this.onceEvents[e],t];break;case"object":this.onceEvents[e].push(t)}return this}function c(e,t,r){if(void 0===r&&(r=t.length),"function"!=typeof t)throw TypeError("The listener must be a function");var n=this.events[e];return n?(n.push(t),n.growArgsNum(r),this.maxListeners!==1/0&&this.maxListeners<=n.length&&console.warn('Maximum event listeners for "'.concat(String(e),'" event!'))):(this.events[e]=new i.TaskCollection(r,!0,t,!1),"symbol"==typeof e&&this._symbolKeys.add(e)),this}function h(e,t){var r=this.events[e];r&&r.removeLast(t);var n=this.onceEvents[e];return n&&("function"==typeof n?this.onceEvents[e]=void 0:"object"==typeof n&&(1===n.length&&n[0]===t?this.onceEvents[e]=void 0:(0,o._fast_remove_single)(n,n.lastIndexOf(t)))),this}function d(e,t,r,n){void 0===r&&(r=this),void 0===n&&(n=t.length),this.boundFuncs||(this.boundFuncs=new Map);var i=t.bind(r);return this.boundFuncs.set(t,i),this.addListener(e,i,n)}function p(e,t){var r,n,i=null===(r=this.boundFuncs)||void 0===r?void 0:r.get(t);return null===(n=this.boundFuncs)||void 0===n||n.delete(t),this.removeListener(e,i)}function g(e){return this.events[e]&&!!this.events[e].length}function y(e,t,r){if(void 0===r&&(r=t.length),"function"!=typeof t)throw TypeError("The listener must be a function");var n=this.events[e];return n&&n instanceof i.TaskCollection?(n.insert(0,t),n.growArgsNum(r),this.maxListeners!==1/0&&this.maxListeners<=n.length&&console.warn('Maximum event listeners for "'.concat(String(e),'" event!'))):(n=this.events[e]=new i.TaskCollection(r,!0,t,!1),"symbol"==typeof e&&this._symbolKeys.add(e)),this}function b(e,t){this.emit===a&&(this.emit=l);var r=this.onceEvents[e];return r?"object"!=typeof r?(this.onceEvents[e]=[t,r],"symbol"==typeof e&&this._symbolKeys.add(e)):(r.unshift(t),this.maxListeners!==1/0&&this.maxListeners<=r.length&&console.warn('Maximum event listeners for "'.concat(String(e),'" once event!'))):(this.onceEvents[e]=[t],"symbol"==typeof e&&this._symbolKeys.add(e)),this}function w(e){return void 0===e?(this.events=(0,s.nullObj)(),this.onceEvents=(0,s.nullObj)(),this._symbolKeys=new Set):(this.events[e]=void 0,this.onceEvents[e]=void 0,"symbol"==typeof e&&this._symbolKeys.delete(e)),this}function m(e){return this.maxListeners=e,this}function E(){return this.maxListeners}function v(e){return this.emit===a?this.events[e]?this.events[e].tasksAsArray().slice():[]:this.events[e]&&this.onceEvents[e]?n(n([],this.events[e].tasksAsArray(),!0),"function"==typeof this.onceEvents[e]?[this.onceEvents[e]]:this.onceEvents[e],!0):this.events[e]?this.events[e].tasksAsArray():this.onceEvents[e]?"function"==typeof this.onceEvents[e]?[this.onceEvents[e]]:this.onceEvents[e]:[]}function x(){var e=this;if(this.emit===a){var t=Object.keys(this.events);return n(n([],t,!0),Array.from(this._symbolKeys),!0).filter(function(t){return t in e.events&&e.events[t]&&e.events[t].length})}var t=Object.keys(this.events).filter(function(t){return e.events[t]&&e.events[t].length}),r=Object.keys(this.onceEvents).filter(function(t){return e.onceEvents[t]&&e.onceEvents[t].length});return n(n(n([],t,!0),r,!0),Array.from(this._symbolKeys).filter(function(t){return t in e.events&&e.events[t]&&e.events[t].length||t in e.onceEvents&&e.onceEvents[t]&&e.onceEvents[t].length}),!0)}function A(e){return this.emit===a?this.events[e]&&this.events[e].length||0:(this.events[e]&&this.events[e].length||0)+(this.onceEvents[e]&&this.onceEvents[e].length||0)}t.EventEmitter=u,u.prototype.emit=a,u.prototype.on=c,u.prototype.once=f,u.prototype.addListener=c,u.prototype.removeListener=h,u.prototype.addListenerBound=d,u.prototype.removeListenerBound=p,u.prototype.hasListeners=g,u.prototype.prependListener=y,u.prototype.prependOnceListener=b,u.prototype.off=h,u.prototype.removeAllListeners=w,u.prototype.setMaxListeners=m,u.prototype.getMaxListeners=E,u.prototype.listeners=v,u.prototype.eventNames=x,u.prototype.listenerCount=A},6428:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(189),t),i(r(3834),t)},163:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bakeCollectionVariadic=exports.bakeCollectionAwait=exports.bakeCollection=exports.BAKED_EMPTY_FUNC=void 0,exports.BAKED_EMPTY_FUNC=function(){};var FORLOOP_FALLBACK=1500;function generateArgsDefCode(e){var t="";if(0===e)return t;for(var r=0;r<e-1;++r)t+="arg"+String(r)+", ";return t+"arg"+String(e-1)}function generateBodyPartsCode(e,t){for(var r="",n="",i=0;i<t;++i)r+="var f".concat(i," = collection[").concat(i,"];\n"),n+="f".concat(i,"(").concat(e,")\n");return{funcDefCode:r,funcCallCode:n}}function generateBodyPartsVariadicCode(e){for(var t="",r="",n=0;n<e;++n)t+="var f".concat(n," = collection[").concat(n,"];\n"),r+="f".concat(n,".apply(undefined, arguments)\n");return{funcDefCode:t,funcCallCode:r}}function bakeCollection(collection,fixedArgsNum){if(0===collection.length)return exports.BAKED_EMPTY_FUNC;if(1===collection.length)return collection[0];if(collection.length<FORLOOP_FALLBACK){var funcFactoryCode,argsDefCode=generateArgsDefCode(fixedArgsNum),_a=generateBodyPartsCode(argsDefCode,collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode="(function(collection) {\n            ".concat(funcDefCode,"\n            collection = undefined;\n            return (function(").concat(argsDefCode,") {\n                ").concat(funcCallCode,"\n            });\n        })")}else{var argsDefCode=generateArgsDefCode(fixedArgsNum);funcFactoryCode=collection.length%10==0?"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; i += 10) {\n                        collection[i](").concat(argsDefCode,");\n                        collection[i+1](").concat(argsDefCode,");\n                        collection[i+2](").concat(argsDefCode,");\n                        collection[i+3](").concat(argsDefCode,");\n                        collection[i+4](").concat(argsDefCode,");\n                        collection[i+5](").concat(argsDefCode,");\n                        collection[i+6](").concat(argsDefCode,");\n                        collection[i+7](").concat(argsDefCode,");\n                        collection[i+8](").concat(argsDefCode,");\n                        collection[i+9](").concat(argsDefCode,");\n                    }\n                });\n            })"):collection.length%4==0?"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; i += 4) {\n                        collection[i](").concat(argsDefCode,");\n                        collection[i+1](").concat(argsDefCode,");\n                        collection[i+2](").concat(argsDefCode,");\n                        collection[i+3](").concat(argsDefCode,");\n                    }\n                });\n            })"):collection.length%3==0?"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; i += 3) {\n                        collection[i](").concat(argsDefCode,");\n                        collection[i+1](").concat(argsDefCode,");\n                        collection[i+2](").concat(argsDefCode,");\n                    }\n                });\n            })"):"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; ++i) {\n                        collection[i](").concat(argsDefCode,");\n                    }\n                });\n            })")}var bakeCollection_1=void 0,fixedArgsNum_1=void 0,bakeCollectionVariadic_1=void 0,bakeCollectionAwait_1=void 0,funcFactory=eval(funcFactoryCode);return funcFactory(collection)}function bakeCollectionAwait(collection,fixedArgsNum){if(0===collection.length)return exports.BAKED_EMPTY_FUNC;if(1===collection.length)return collection[0];if(collection.length<FORLOOP_FALLBACK){var funcFactoryCode,argsDefCode=generateArgsDefCode(fixedArgsNum),_a=generateBodyPartsCode(argsDefCode,collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode="(function(collection) {\n            ".concat(funcDefCode,"\n            collection = undefined;\n            return (function(").concat(argsDefCode,") {\n                return Promise.all([ ").concat(funcCallCode," ]);\n            });\n        })")}else{var argsDefCode=generateArgsDefCode(fixedArgsNum);funcFactoryCode="(function(collection) {\n            return (function(".concat(argsDefCode,") {\n                var promises = Array(collection.length);\n                for (var i = 0; i < collection.length; ++i) {\n                    promises[i] = collection[i](").concat(argsDefCode,");\n                }\n                return Promise.all(promises);\n            });\n        })")}var bakeCollection_2=void 0,fixedArgsNum_2=void 0,bakeCollectionVariadic_2=void 0,bakeCollectionAwait_2=void 0,funcFactory=eval(funcFactoryCode);return funcFactory(collection)}function bakeCollectionVariadic(collection){if(0===collection.length)return exports.BAKED_EMPTY_FUNC;if(1===collection.length)return collection[0];if(collection.length<FORLOOP_FALLBACK){var funcFactoryCode,_a=generateBodyPartsVariadicCode(collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode="(function(collection) {\n            ".concat(funcDefCode,"\n            collection = undefined;\n            return (function() {\n                ").concat(funcCallCode,"\n            });\n        })")}else funcFactoryCode="(function(collection) {\n            return (function() {\n                for (var i = 0; i < collection.length; ++i) {\n                    collection[i].apply(undefined, arguments);\n                }\n            });\n        })";var bakeCollection_3=void 0,fixedArgsNum=void 0,bakeCollectionVariadic_3=void 0,bakeCollectionAwait_3=void 0,funcFactory=eval(funcFactoryCode);return funcFactory(collection)}exports.bakeCollection=bakeCollection,exports.bakeCollectionAwait=bakeCollectionAwait,exports.bakeCollectionVariadic=bakeCollectionVariadic},1167:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(8463),t)},8463:function(e,t,r){"use strict";var n=this&&this.__spreadArray||function(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.TaskCollection=void 0;var i=r(3406),o=r(163);function s(e,t){var r,n=this.length;if(n>1)t?((r=this._tasks).push.apply(r,arguments),this.length+=arguments.length):(this._tasks.push(e),this.length++);else if(t){if(1===n){var i=Array(1+arguments.length);i.push(i),i.push.apply(i,arguments),this._tasks=i}else{var i=Array(arguments.length);i.push.apply(i,arguments),this._tasks=i}this.length+=arguments.length}else 1===n?this._tasks=[this._tasks,e]:this._tasks=e,this.length++}function a(e,t){var r,n=this.length;if(n>1)t?((r=this._tasks).push.apply(r,arguments),this.length+=arguments.length):(this._tasks.push(e),this.length++);else if(t){if(1===n){var i=Array(1+arguments.length);i.push(i),i.push.apply(i,arguments),this._tasks=i}else{var i=Array(arguments.length);i.push.apply(i,arguments),this._tasks=i}this.length+=arguments.length}else 1===n?this._tasks=[this._tasks,e]:this._tasks=e,this.length++;this.firstEmitBuildStrategy?this.call=p:this.rebuild()}function l(e){0!==this.length&&(1===this.length?this._tasks===e&&(this.length=0):((0,i._fast_remove_single)(this._tasks,this._tasks.lastIndexOf(e)),1===this._tasks.length?(this._tasks=this._tasks[0],this.length=1):this.length=this._tasks.length))}function u(e){if(0!==this.length){if(1===this.length){if(this._tasks===e&&(this.length=0),this.firstEmitBuildStrategy){this.call=o.BAKED_EMPTY_FUNC;return}this.rebuild();return}(0,i._fast_remove_single)(this._tasks,this._tasks.lastIndexOf(e)),1===this._tasks.length?(this._tasks=this._tasks[0],this.length=1):this.length=this._tasks.length,this.firstEmitBuildStrategy?this.call=p:this.rebuild()}}function f(e){for(var t,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];0===this.length?(this._tasks=r,this.length=1):(1===this.length?(r.unshift(this._tasks),this._tasks=r):(t=this._tasks).splice.apply(t,n([e,0],r,!1)),this.length=this._tasks.length)}function c(e){for(var t,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];0===this.length?(this._tasks=r,this.length=1):(1===this.length?(r.unshift(this._tasks),this._tasks=r):(t=this._tasks).splice.apply(t,n([e,0],r,!1)),this.length=this._tasks.length),this.firstEmitBuildStrategy?this.call=p:this.rebuild()}function h(){0===this.length?this.call=o.BAKED_EMPTY_FUNC:1===this.length?this.call=this._tasks:this.call=(0,o.bakeCollection)(this._tasks,this.argsNum)}function d(){0===this.length?this.call=o.BAKED_EMPTY_FUNC:1===this.length?this.call=this._tasks:this.call=(0,o.bakeCollectionAwait)(this._tasks,this.argsNum)}function p(){this.rebuild(),this.call.apply(void 0,arguments)}var g=function(){return function(e,t,r,n){void 0===t&&(t=!0),void 0===r&&(r=null),void 0===n&&(n=!1),this.awaitTasks=n,this.call=o.BAKED_EMPTY_FUNC,this.argsNum=e,this.firstEmitBuildStrategy=!0,n?this.rebuild=d.bind(this):this.rebuild=h.bind(this),this.setAutoRebuild(t),r?"function"==typeof r?(this._tasks=r,this.length=1):(this._tasks=r,this.length=r.length):(this._tasks=null,this.length=0),t&&this.rebuild()}}();function y(){this._tasks=null,this.length=0,this.call=o.BAKED_EMPTY_FUNC}function b(){this._tasks=null,this.length=0,this.call=o.BAKED_EMPTY_FUNC}function w(e){this.argsNum<e&&(this.argsNum=e,this.firstEmitBuildStrategy?this.call=p:this.rebuild())}function m(e){e?(this.push=a.bind(this),this.insert=c.bind(this),this.removeLast=u.bind(this)):(this.push=s.bind(this),this.insert=f.bind(this),this.removeLast=l.bind(this))}function E(){return 0===this.length?[]:1===this.length?[this._tasks]:this._tasks}function v(e){0===e.length?(this.length=0,this.call=o.BAKED_EMPTY_FUNC):1===e.length?(this.length=1,this.call=e[0],this._tasks=e[0]):(this.length=e.length,this._tasks=e,this.firstEmitBuildStrategy?this.call=p:this.rebuild())}t.TaskCollection=g,g.prototype.fastClear=y,g.prototype.clear=b,g.prototype.growArgsNum=w,g.prototype.setAutoRebuild=m,g.prototype.tasksAsArray=E,g.prototype.setTasks=v},3406:(e,t)=>{"use strict";function r(e,t){-1!==t&&(0===t?e.shift():t===e.length-1?e.length=e.length-1:e.splice(t,1))}Object.defineProperty(t,"__esModule",{value:!0}),t._fast_remove_single=void 0,t._fast_remove_single=r},189:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1977:(e,t)=>{"use strict";function r(){var e={};return e.__proto__=null,e}Object.defineProperty(t,"__esModule",{value:!0}),t.nullObj=void 0,t.nullObj=r},1125:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=void 0;let n=r(7429);class i{constructor(e){this.lookupTable=new Map,this.head=null,this.tail=null;let{maxSize:t=25,entryExpirationTimeInMS:r=null,onEntryEvicted:n,onEntryMarkedAsMostRecentlyUsed:i,cloneFn:o,clone:s}=null!=e?e:{};if(Number.isNaN(t)||t<=0)throw Error("maxSize must be greater than 0.");if("number"==typeof r&&(r<=0||Number.isNaN(r)))throw Error("entryExpirationTimeInMS must either be null (no expiry) or greater than 0");this.maxSizeInternal=t,this.entryExpirationTimeInMS=r,this.onEntryEvicted=n,this.onEntryMarkedAsMostRecentlyUsed=i,this.clone=s,this.cloneFn=o}get size(){return this.cleanCache(),this.lookupTable.size}get remainingSize(){return this.maxSizeInternal-this.size}get newest(){return this.head?this.head.isExpired?(this.removeNodeFromListAndLookupTable(this.head),this.newest):this.mapNodeToEntry(this.head):null}get oldest(){return this.tail?this.tail.isExpired?(this.removeNodeFromListAndLookupTable(this.tail),this.oldest):this.mapNodeToEntry(this.tail):null}get maxSize(){return this.maxSizeInternal}set maxSize(e){if(Number.isNaN(e)||e<=0)throw Error("maxSize must be greater than 0.");this.maxSizeInternal=e,this.enforceSizeLimit()}set(e,t,r){let i=this.lookupTable.get(e);i&&this.removeNodeFromListAndLookupTable(i);let o=new n.LRUCacheNode(e,t,{entryExpirationTimeInMS:this.entryExpirationTimeInMS,onEntryEvicted:this.onEntryEvicted,onEntryMarkedAsMostRecentlyUsed:this.onEntryMarkedAsMostRecentlyUsed,clone:this.clone,cloneFn:this.cloneFn,...r});return this.setNodeAsHead(o),this.lookupTable.set(e,o),this.enforceSizeLimit(),this}get(e){let t=this.lookupTable.get(e);return t?t.isExpired?(this.removeNodeFromListAndLookupTable(t),null):(this.setNodeAsHead(t),t.value):null}peek(e){let t=this.lookupTable.get(e);return t?t.isExpired?(this.removeNodeFromListAndLookupTable(t),null):t.value:null}delete(e){let t=this.lookupTable.get(e);return!!t&&this.removeNodeFromListAndLookupTable(t)}has(e){let t=this.lookupTable.get(e);return!!t&&(!t.isExpired||(this.removeNodeFromListAndLookupTable(t),!1))}clear(){this.head=null,this.tail=null,this.lookupTable.clear()}find(e){let t=this.head;for(;t;){if(t.isExpired){let e=t.next;this.removeNodeFromListAndLookupTable(t),t=e;continue}let r=this.mapNodeToEntry(t);if(e(r))return this.setNodeAsHead(t),r;t=t.next}return null}forEach(e){let t=this.head,r=0;for(;t;){if(t.isExpired){let e=t.next;this.removeNodeFromListAndLookupTable(t),t=e;continue}e(t.value,t.key,r),t=t.next,r++}}*values(){let e=this.head;for(;e;){if(e.isExpired){let t=e.next;this.removeNodeFromListAndLookupTable(e),e=t;continue}yield e.value,e=e.next}}*keys(){let e=this.head;for(;e;){if(e.isExpired){let t=e.next;this.removeNodeFromListAndLookupTable(e),e=t;continue}yield e.key,e=e.next}}*entries(){let e=this.head;for(;e;){if(e.isExpired){let t=e.next;this.removeNodeFromListAndLookupTable(e),e=t;continue}yield this.mapNodeToEntry(e),e=e.next}}*[Symbol.iterator](){let e=this.head;for(;e;){if(e.isExpired){let t=e.next;this.removeNodeFromListAndLookupTable(e),e=t;continue}yield this.mapNodeToEntry(e),e=e.next}}enforceSizeLimit(){let e=this.tail;for(;null!==e&&this.size>this.maxSizeInternal;){let t=e.prev;this.removeNodeFromListAndLookupTable(e),e=t}}mapNodeToEntry({key:e,value:t}){return{key:e,value:t}}setNodeAsHead(e){this.removeNodeFromList(e),this.head?(e.next=this.head,this.head.prev=e,this.head=e):(this.head=e,this.tail=e),e.invokeOnEntryMarkedAsMostRecentlyUsed()}removeNodeFromList(e){null!==e.prev&&(e.prev.next=e.next),null!==e.next&&(e.next.prev=e.prev),this.head===e&&(this.head=e.next),this.tail===e&&(this.tail=e.prev),e.next=null,e.prev=null}removeNodeFromListAndLookupTable(e){return e.invokeOnEvicted(),this.removeNodeFromList(e),this.lookupTable.delete(e.key)}cleanCache(){if(!this.entryExpirationTimeInMS)return;let e=[];for(let t of this.lookupTable.values())t.isExpired&&e.push(t);e.forEach(e=>this.removeNodeFromListAndLookupTable(e))}}t.LRUCache=i},7429:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCacheNode=void 0;class r{constructor(e,t,r){let{entryExpirationTimeInMS:n=null,next:i=null,prev:o=null,onEntryEvicted:s,onEntryMarkedAsMostRecentlyUsed:a,clone:l,cloneFn:u}=null!=r?r:{};if("number"==typeof n&&(n<=0||Number.isNaN(n)))throw Error("entryExpirationTimeInMS must either be null (no expiry) or greater than 0");this.clone=null!=l&&l,this.cloneFn=null!=u?u:this.defaultClone,this.key=e,this.internalValue=this.clone?this.cloneFn(t):t,this.created=Date.now(),this.entryExpirationTimeInMS=n,this.next=i,this.prev=o,this.onEntryEvicted=s,this.onEntryMarkedAsMostRecentlyUsed=a}get value(){return this.clone?this.cloneFn(this.internalValue):this.internalValue}get isExpired(){return"number"==typeof this.entryExpirationTimeInMS&&Date.now()-this.created>this.entryExpirationTimeInMS}invokeOnEvicted(){if(this.onEntryEvicted){let{key:e,value:t,isExpired:r}=this;this.onEntryEvicted({key:e,value:t,isExpired:r})}}invokeOnEntryMarkedAsMostRecentlyUsed(){if(this.onEntryMarkedAsMostRecentlyUsed){let{key:e,value:t}=this;this.onEntryMarkedAsMostRecentlyUsed({key:e,value:t})}}defaultClone(e){return"boolean"==typeof e||"string"==typeof e||"number"==typeof e?e:JSON.parse(JSON.stringify(e))}}t.LRUCacheNode=r},9692:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(1125),t)},2232:(e,t,r)=>{"use strict";r.d(t,{ko:()=>e2});var n={};r.r(n),r.d(n,{aK:()=>O,e8:()=>p,DO:()=>d,dJ:()=>U,OG:()=>N,My:()=>y,Ph:()=>x,lX:()=>A,Id:()=>C,fg:()=>T,qj:()=>k,aT:()=>v,r4:()=>S,aY:()=>h,x:()=>P,lq:()=>_,z:()=>B,zW:()=>b,Q5:()=>F});var i=r(8775),o=r(3331),s=r(9393);class a extends o.Vw{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,s.sd)(e);let r=(0,o.ZJ)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return(0,s.CC)(this),this.iHash.update(e),this}digestInto(e){(0,s.CC)(this),(0,s.DO)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let l=(e,t,r)=>new a(e,t).update(r).digest();l.create=(e,t)=>new a(e,t);let u=BigInt(0),f=BigInt(1),c=BigInt(2);function h(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function d(e){if(!h(e))throw Error("Uint8Array expected")}function p(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)}let g=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function y(e){d(e);let t="";for(let r=0;r<e.length;r++)t+=g[e[r]];return t}function b(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function w(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?u:BigInt("0x"+e)}let m={_0:48,_9:57,A:65,F:70,a:97,f:102};function E(e){return e>=m._0&&e<=m._9?e-m._0:e>=m.A&&e<=m.F?e-(m.A-10):e>=m.a&&e<=m.f?e-(m.a-10):void 0}function v(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=E(e.charCodeAt(i)),o=E(e.charCodeAt(i+1));if(void 0===r||void 0===o)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);n[t]=16*r+o}return n}function x(e){return w(y(e))}function A(e){return d(e),w(y(Uint8Array.from(e).reverse()))}function _(e,t){return v(e.toString(16).padStart(2*t,"0"))}function B(e,t){return _(e,t).reverse()}function k(e,t,r){let n;if("string"==typeof t)try{n=v(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(h(t))n=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let i=n.length;if("number"==typeof r&&i!==r)throw Error(e+" of length "+r+" expected, got "+i);return n}function C(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];d(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r}let I=e=>"bigint"==typeof e&&u<=e;function S(e,t,r){return I(e)&&I(t)&&I(r)&&t<=e&&e<r}function O(e,t,r,n){if(!S(t,r,n))throw Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function U(e){let t;for(t=0;e>u;e>>=f,t+=1);return t}let N=e=>(c<<BigInt(e-1))-f,L=e=>new Uint8Array(e),R=e=>Uint8Array.from(e);function T(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=L(e),i=L(e),o=0,s=()=>{n.fill(1),i.fill(0),o=0},a=(...e)=>r(i,n,...e),l=(e=L())=>{i=a(R([0]),e),n=a(),0!==e.length&&(i=a(R([1]),e),n=a())},u=()=>{if(o++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(n=a()).slice();r.push(t),e+=n.length}return C(...r)};return(e,t)=>{let r;for(s(),l(e);!(r=t(u()));)l();return s(),r}}let $={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||h(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function F(e,t,r={}){let n=(t,r,n)=>{let i=$[r];if("function"!=typeof i)throw Error("invalid validator function");let o=e[t];if((!n||void 0!==o)&&!i(o,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+o)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e}function P(e){let t=new WeakMap;return(r,...n)=>{let i=t.get(r);if(void 0!==i)return i;let o=e(r,...n);return t.set(r,o),o}}let H=BigInt(0),M=BigInt(1),q=BigInt(2),j=BigInt(3),z=BigInt(4),D=BigInt(5),V=BigInt(8);function K(e,t){let r=e%t;return r>=H?r:t+r}function Z(e,t,r){if(t<H)throw Error("invalid exponent, negatives unsupported");if(r<=H)throw Error("invalid modulus");if(r===M)return H;let n=M;for(;t>H;)t&M&&(n=n*e%r),e=e*e%r,t>>=M;return n}function W(e,t,r){let n=e;for(;t-- >H;)n*=n,n%=r;return n}function G(e,t){if(e===H)throw Error("invert: expected non-zero number");if(t<=H)throw Error("invert: expected positive modulus, got "+t);let r=K(e,t),n=t,i=H,o=M,s=M,a=H;for(;r!==H;){let e=n/r,t=n%r,l=i-s*e,u=o-a*e;n=r,r=t,i=s,o=a,s=l,a=u}if(n!==M)throw Error("invert: does not exist");return K(i,t)}function Y(e){let t,r,n;let i=(e-M)/q;for(t=e-M,r=0;t%q===H;t/=q,r++);for(n=q;n<e&&Z(n,i,e)!==e-M;n++)if(n>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===r){let t=(e+M)/z;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}let o=(t+M)/q;return function(e,s){if(e.pow(s,i)===e.neg(e.ONE))throw Error("Cannot find square root");let a=r,l=e.pow(e.mul(e.ONE,n),t),u=e.pow(s,o),f=e.pow(s,t);for(;!e.eql(f,e.ONE);){if(e.eql(f,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(f);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,M<<BigInt(a-t-1));l=e.sqr(r),u=e.mul(u,r),f=e.mul(f,l),a=t}return u}}function J(e){if(e%z===j){let t=(e+M)/z;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}if(e%V===D){let t=(e-D)/V;return function(e,r){let n=e.mul(r,q),i=e.pow(n,t),o=e.mul(r,i),s=e.mul(e.mul(o,q),i),a=e.mul(o,e.sub(s,e.ONE));if(!e.eql(e.sqr(a),r))throw Error("Cannot find square root");return a}}return Y(e)}let Q=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function X(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"};return F(e,Q.reduce((e,t)=>(e[t]="function",e),t))}function ee(e,t,r){if(r<H)throw Error("invalid exponent, negatives unsupported");if(r===H)return e.ONE;if(r===M)return t;let n=e.ONE,i=t;for(;r>H;)r&M&&(n=e.mul(n,i)),i=e.sqr(i),r>>=M;return n}function et(e,t){let r=Array(t.length),n=t.reduce((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n)),e.ONE),i=e.inv(n);return t.reduceRight((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n)),i),r}function er(e,t){let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function en(e,t,r=!1,n={}){let i;if(e<=H)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:o,nByteLength:s}=er(e,t);if(s>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let a=Object.freeze({ORDER:e,isLE:r,BITS:o,BYTES:s,MASK:N(o),ZERO:H,ONE:M,create:t=>K(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return H<=t&&t<e},is0:e=>e===H,isOdd:e=>(e&M)===M,neg:t=>K(-t,e),eql:(e,t)=>e===t,sqr:t=>K(t*t,e),add:(t,r)=>K(t+r,e),sub:(t,r)=>K(t-r,e),mul:(t,r)=>K(t*r,e),pow:(e,t)=>ee(a,e,t),div:(t,r)=>K(t*G(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>G(t,e),sqrt:n.sqrt||(t=>(i||(i=J(e)),i(a,t))),invertBatch:e=>et(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?B(e,s):_(e,s),fromBytes:e=>{if(e.length!==s)throw Error("Field.fromBytes: expected "+s+" bytes, got "+e.length);return r?A(e):x(e)}});return Object.freeze(a)}function ei(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function eo(e){let t=ei(e);return t+Math.ceil(t/2)}function es(e,t,r=!1){let n=e.length,i=ei(t),o=eo(t);if(n<16||n<o||n>1024)throw Error("expected "+o+"-1024 bytes of input, got "+n);let s=K(r?A(e):x(e),t-M)+M;return r?B(s,i):_(s,i)}let ea=BigInt(0),el=BigInt(1);function eu(e,t){let r=t.negate();return e?r:t}function ef(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function ec(e,t){return ef(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}function eh(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}function ed(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}let ep=new WeakMap,eg=new WeakMap;function ey(e){return eg.get(e)||1}function eb(e,t){return{constTimeNegate:eu,hasPrecomputes:e=>1!==ey(e),unsafeLadder(t,r,n=e.ZERO){let i=t;for(;r>ea;)r&el&&(n=n.add(i)),i=i.double(),r>>=el;return n},precomputeWindow(e,r){let{windows:n,windowSize:i}=ec(r,t),o=[],s=e,a=s;for(let e=0;e<n;e++){a=s,o.push(a);for(let e=1;e<i;e++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(r,n,i){let{windows:o,windowSize:s}=ec(r,t),a=e.ZERO,l=e.BASE,u=BigInt(2**r-1),f=2**r,c=BigInt(r);for(let e=0;e<o;e++){let t=e*s,r=Number(i&u);i>>=c,r>s&&(r-=f,i+=el);let o=t,h=t+Math.abs(r)-1,d=e%2!=0,p=r<0;0===r?l=l.add(eu(d,n[o])):a=a.add(eu(p,n[h]))}return{p:a,f:l}},wNAFUnsafe(r,n,i,o=e.ZERO){let{windows:s,windowSize:a}=ec(r,t),l=BigInt(2**r-1),u=2**r,f=BigInt(r);for(let e=0;e<s;e++){let t=e*a;if(i===ea)break;let r=Number(i&l);if(i>>=f,r>a&&(r-=u,i+=el),0===r)continue;let s=n[t+Math.abs(r)-1];r<0&&(s=s.negate()),o=o.add(s)}return o},getPrecomputes(e,t,r){let n=ep.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&ep.set(t,r(n))),n},wNAFCached(e,t,r){let n=ey(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){let i=ey(e);return 1===i?this.unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)},setWindowSize(e,r){ef(r,t),eg.set(e,r),ep.delete(e)}}}function ew(e,t,r,n){if(eh(r,e),ed(n,t),r.length!==n.length)throw Error("arrays of points and scalars must have equal length");let i=e.ZERO,o=U(BigInt(r.length)),s=o>12?o-3:o>4?o-2:o?2:1,a=(1<<s)-1,l=Array(a+1).fill(i),u=Math.floor((t.BITS-1)/s)*s,f=i;for(let e=u;e>=0;e-=s){l.fill(i);for(let t=0;t<n.length;t++){let i=Number(n[t]>>BigInt(e)&BigInt(a));l[i]=l[i].add(r[t])}let t=i;for(let e=l.length-1,r=i;e>0;e--)r=r.add(l[e]),t=t.add(r);if(f=f.add(t),0!==e)for(let e=0;e<s;e++)f=f.double()}return f}function em(e){return X(e.Fp),F(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...er(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function eE(e){void 0!==e.lowS&&p("lowS",e.lowS),void 0!==e.prehash&&p("prehash",e.prehash)}function ev(e){let t=em(e);F(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}let{Ph:ex,aT:eA}=n;class e_ extends Error{constructor(e=""){super(e)}}let eB={Err:e_,_tlv:{encode:(e,t)=>{let{Err:r}=eB;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");let n=t.length/2,i=b(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");let o=n>127?b(i.length/2|128):"";return b(e)+o+i+t},decode(e,t){let{Err:r}=eB,n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");let i=t[n++],o=0;if(128&i){let e=127&i;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");let s=t.subarray(n,n+e);if(s.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===s[0])throw new r("tlv.decode(long): zero leftmost byte");for(let e of s)o=o<<8|e;if(n+=e,o<128)throw new r("tlv.decode(long): not minimal encoding")}else o=i;let s=t.subarray(n,n+o);if(s.length!==o)throw new r("tlv.decode: wrong value length");return{v:s,l:t.subarray(n+o)}}},_int:{encode(e){let{Err:t}=eB;if(e<ek)throw new t("integer: negative integers are not allowed");let r=b(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=eB;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return ex(e)}},toSig(e){let{Err:t,_int:r,_tlv:n}=eB,i="string"==typeof e?eA(e):e;d(i);let{v:o,l:s}=n.decode(48,i);if(s.length)throw new t("invalid signature: left bytes after parsing");let{v:a,l:l}=n.decode(2,o),{v:u,l:f}=n.decode(2,l);if(f.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(e){let{_tlv:t,_int:r}=eB,n=t.encode(2,r.encode(e.r))+t.encode(2,r.encode(e.s));return t.encode(48,n)}},ek=BigInt(0),eC=BigInt(1),eI=(BigInt(2),BigInt(3));function eS(e){let t=ev(e),{Fp:r}=t,n=en(t.n,t.nBitLength),i=t.toBytes||((e,t,n)=>{let i=t.toAffine();return C(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),o=t.fromBytes||(e=>{let t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function s(e){let{a:n,b:i}=t,o=r.sqr(e),s=r.mul(o,e);return r.add(r.add(s,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),s(t.Gx)))throw Error("bad generator point: equation left != right");function a(e){return S(e,eC,t.n)}function l(e){let r;let{allowedPrivateKeyLengths:n,nByteLength:i,wrapPrivateKey:o,n:s}=t;if(n&&"bigint"!=typeof e){if(h(e)&&(e=y(e)),"string"!=typeof e||!n.includes(e.length))throw Error("invalid private key");e=e.padStart(2*i,"0")}try{r="bigint"==typeof e?e:x(k("private key",e,i))}catch(t){throw Error("invalid private key, expected hex or "+i+" bytes, got "+typeof e)}return o&&(r=K(r,s)),O("private key",r,eC,s),r}function u(e){if(!(e instanceof d))throw Error("ProjectivePoint expected")}let f=P((e,t)=>{let{px:n,py:i,pz:o}=e;if(r.eql(o,r.ONE))return{x:n,y:i};let s=e.is0();null==t&&(t=s?r.ONE:r.inv(o));let a=r.mul(n,t),l=r.mul(i,t),u=r.mul(o,t);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw Error("invZ was invalid");return{x:a,y:l}}),c=P(e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw Error("bad point: ZERO")}let{x:n,y:i}=e.toAffine();if(!r.isValid(n)||!r.isValid(i))throw Error("bad point: x or y not FE");let o=r.sqr(i),a=s(n);if(!r.eql(o,a))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class d{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw Error("x required");if(null==t||!r.isValid(t))throw Error("y required");if(null==n||!r.isValid(n))throw Error("z required");Object.freeze(this)}static fromAffine(e){let{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw Error("invalid affine point");if(e instanceof d)throw Error("projective point not allowed");let i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?d.ZERO:new d(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(d.fromAffine)}static fromHex(e){let t=d.fromAffine(o(k("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return d.BASE.multiply(l(e))}static msm(e,t){return ew(d,n,e,t)}_setWindowSize(e){b.setWindowSize(this,e)}assertValidity(){c(this)}hasEvenY(){let{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){u(e);let{px:t,py:n,pz:i}=this,{px:o,py:s,pz:a}=e,l=r.eql(r.mul(t,a),r.mul(o,i)),f=r.eql(r.mul(n,a),r.mul(s,i));return l&&f}negate(){return new d(this.px,r.neg(this.py),this.pz)}double(){let{a:e,b:n}=t,i=r.mul(n,eI),{px:o,py:s,pz:a}=this,l=r.ZERO,u=r.ZERO,f=r.ZERO,c=r.mul(o,o),h=r.mul(s,s),p=r.mul(a,a),g=r.mul(o,s);return g=r.add(g,g),f=r.mul(o,a),f=r.add(f,f),l=r.mul(e,f),u=r.mul(i,p),u=r.add(l,u),l=r.sub(h,u),u=r.add(h,u),u=r.mul(l,u),l=r.mul(g,l),f=r.mul(i,f),p=r.mul(e,p),g=r.sub(c,p),g=r.mul(e,g),g=r.add(g,f),f=r.add(c,c),c=r.add(f,c),c=r.add(c,p),c=r.mul(c,g),u=r.add(u,c),p=r.mul(s,a),p=r.add(p,p),c=r.mul(p,g),l=r.sub(l,c),f=r.mul(p,h),f=r.add(f,f),new d(l,u,f=r.add(f,f))}add(e){u(e);let{px:n,py:i,pz:o}=this,{px:s,py:a,pz:l}=e,f=r.ZERO,c=r.ZERO,h=r.ZERO,p=t.a,g=r.mul(t.b,eI),y=r.mul(n,s),b=r.mul(i,a),w=r.mul(o,l),m=r.add(n,i),E=r.add(s,a);m=r.mul(m,E),E=r.add(y,b),m=r.sub(m,E),E=r.add(n,o);let v=r.add(s,l);return E=r.mul(E,v),v=r.add(y,w),E=r.sub(E,v),v=r.add(i,o),f=r.add(a,l),v=r.mul(v,f),f=r.add(b,w),v=r.sub(v,f),h=r.mul(p,E),f=r.mul(g,w),h=r.add(f,h),f=r.sub(b,h),h=r.add(b,h),c=r.mul(f,h),b=r.add(y,y),b=r.add(b,y),w=r.mul(p,w),E=r.mul(g,E),b=r.add(b,w),w=r.sub(y,w),w=r.mul(p,w),E=r.add(E,w),y=r.mul(b,E),c=r.add(c,y),y=r.mul(v,E),f=r.mul(m,f),f=r.sub(f,y),y=r.mul(m,b),h=r.mul(v,h),new d(f,c,h=r.add(h,y))}subtract(e){return this.add(e.negate())}is0(){return this.equals(d.ZERO)}wNAF(e){return b.wNAFCached(this,e,d.normalizeZ)}multiplyUnsafe(e){let{endo:n,n:i}=t;O("scalar",e,ek,i);let o=d.ZERO;if(e===ek)return o;if(this.is0()||e===eC)return this;if(!n||b.hasPrecomputes(this))return b.wNAFCachedUnsafe(this,e,d.normalizeZ);let{k1neg:s,k1:a,k2neg:l,k2:u}=n.splitScalar(e),f=o,c=o,h=this;for(;a>ek||u>ek;)a&eC&&(f=f.add(h)),u&eC&&(c=c.add(h)),h=h.double(),a>>=eC,u>>=eC;return s&&(f=f.negate()),l&&(c=c.negate()),c=new d(r.mul(c.px,n.beta),c.py,c.pz),f.add(c)}multiply(e){let n,i;let{endo:o,n:s}=t;if(O("scalar",e,eC,s),o){let{k1neg:t,k1:s,k2neg:a,k2:l}=o.splitScalar(e),{p:u,f:f}=this.wNAF(s),{p:c,f:h}=this.wNAF(l);u=b.constTimeNegate(t,u),c=b.constTimeNegate(a,c),c=new d(r.mul(c.px,o.beta),c.py,c.pz),n=u.add(c),i=f.add(h)}else{let{p:t,f:r}=this.wNAF(e);n=t,i=r}return d.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(e,t,r){let n=d.BASE,i=(e,t)=>t!==ek&&t!==eC&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),o=i(this,t).add(i(e,r));return o.is0()?void 0:o}toAffine(e){return f(this,e)}isTorsionFree(){let{h:e,isTorsionFree:r}=t;if(e===eC)return!0;if(r)return r(d,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:r}=t;return e===eC?this:r?r(d,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return p("isCompressed",e),this.assertValidity(),i(d,this,e)}toHex(e=!0){return p("isCompressed",e),y(this.toRawBytes(e))}}d.BASE=new d(t.Gx,t.Gy,r.ONE),d.ZERO=new d(r.ZERO,r.ONE,r.ZERO);let g=t.nBitLength,b=eb(d,t.endo?Math.ceil(g/2):g);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:a}}function eO(e){let t=em(e);return F(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function eU(e){let t=eO(e),{Fp:r,n:n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function s(e){return K(e,n)}function a(e){return G(e,n)}let{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:f,isWithinCurveOrder:c}=eS({...t,toBytes(e,t,n){let i=t.toAffine(),o=r.toBytes(i.x),s=C;return(p("isCompressed",n),n)?s(Uint8Array.from([t.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,r.toBytes(i.y))},fromBytes(e){let t=e.length,n=e[0],s=e.subarray(1);if(t===i&&(2===n||3===n)){let e;let t=x(s);if(!S(t,eC,r.ORDER))throw Error("Point is not on curve");let i=f(t);try{e=r.sqrt(i)}catch(e){throw Error("Point is not on curve"+(e instanceof Error?": "+e.message:""))}return(1&n)==1!=((e&eC)===eC)&&(e=r.neg(e)),{x:t,y:e}}if(t===o&&4===n)return{x:r.fromBytes(s.subarray(0,r.BYTES)),y:r.fromBytes(s.subarray(r.BYTES,2*r.BYTES))};throw Error("invalid Point, expected length of "+i+", or uncompressed "+o+", got "+t)}}),d=e=>y(_(e,t.nByteLength));function g(e){return e>n>>eC}function b(e){return g(e)?s(-e):e}let w=(e,t,r)=>x(e.slice(t,r));class m{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let r=t.nByteLength;return new m(w(e=k("compactSignature",e,2*r),0,r),w(e,r,2*r))}static fromDER(e){let{r:t,s:r}=eB.toSig(k("DER",e));return new m(t,r)}assertValidity(){O("r",this.r,eC,n),O("s",this.s,eC,n)}addRecoveryBit(e){return new m(this.r,this.s,e)}recoverPublicKey(e){let{r:n,s:i,recovery:o}=this,u=L(k("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw Error("recovery id invalid");let f=2===o||3===o?n+t.n:n;if(f>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let c=(1&o)==0?"02":"03",h=l.fromHex(c+d(f)),p=a(f),g=s(-u*p),y=s(i*p),b=l.BASE.multiplyAndAddUnsafe(h,g,y);if(!b)throw Error("point at infinify");return b.assertValidity(),b}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return v(this.toDERHex())}toDERHex(){return eB.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return v(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}let E={isValidPrivateKey(e){try{return u(e),!0}catch(e){return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{let e=eo(t.n);return es(t.randomBytes(e),t.n)},precompute:(e=8,t=l.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function A(e,t=!0){return l.fromPrivateKey(e).toRawBytes(t)}function B(e){let t=h(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===i||n===o:r?n===2*i||n===2*o:e instanceof l}function I(e,t,r=!0){if(B(e))throw Error("first arg must be private key");if(!B(t))throw Error("second arg must be public key");return l.fromHex(t).multiply(u(e)).toRawBytes(r)}let U=t.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let r=x(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},L=t.bits2int_modN||function(e){return s(U(e))},R=N(t.nBitLength);function $(e){return O("num < 2^"+t.nBitLength,e,ek,R),_(e,t.nByteLength)}function F(e,n,i=P){if(["recovered","canonical"].some(e=>e in i))throw Error("sign() legacy options not supported");let{hash:o,randomBytes:f}=t,{lowS:h,prehash:d,extraEntropy:p}=i;null==h&&(h=!0),e=k("msgHash",e),eE(i),d&&(e=k("prehashed msgHash",o(e)));let y=L(e),w=u(n),E=[$(w),$(y)];if(null!=p&&!1!==p){let e=!0===p?f(r.BYTES):p;E.push(k("extraEntropy",e))}let v=C(...E),x=y;return{seed:v,k2sig:function(e){let t=U(e);if(!c(t))return;let r=a(t),n=l.BASE.multiply(t).toAffine(),i=s(n.x);if(i===ek)return;let o=s(r*s(x+i*w));if(o===ek)return;let u=(n.x===i?0:2)|Number(n.y&eC),f=o;return h&&g(o)&&(f=b(o),u^=1),new m(i,f,u)}}}let P={lowS:t.lowS,prehash:!1},H={lowS:t.lowS,prehash:!1};function M(e,r,n=P){let{seed:i,k2sig:o}=F(e,r,n),s=t;return T(s.hash.outputLen,s.nByteLength,s.hmac)(i,o)}function q(e,r,n,i=H){let o,u;let f=e;r=k("msgHash",r),n=k("publicKey",n);let{lowS:c,prehash:d,format:p}=i;if(eE(i),"strict"in i)throw Error("options.strict was renamed to lowS");if(void 0!==p&&"compact"!==p&&"der"!==p)throw Error("format must be compact or der");let g="string"==typeof f||h(f),y=!g&&!p&&"object"==typeof f&&null!==f&&"bigint"==typeof f.r&&"bigint"==typeof f.s;if(!g&&!y)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(y&&(u=new m(f.r,f.s)),g){try{"compact"!==p&&(u=m.fromDER(f))}catch(e){if(!(e instanceof eB.Err))throw e}u||"der"===p||(u=m.fromCompact(f))}o=l.fromHex(n)}catch(e){return!1}if(!u||c&&u.hasHighS())return!1;d&&(r=t.hash(r));let{r:b,s:w}=u,E=L(r),v=a(w),x=s(E*v),A=s(b*v),_=l.BASE.multiplyAndAddUnsafe(o,x,A)?.toAffine();return!!_&&s(_.x)===b}return l.BASE._setWindowSize(8),{CURVE:t,getPublicKey:A,getSharedSecret:I,sign:M,verify:q,ProjectivePoint:l,Signature:m,utils:E}}function eN(e){return{hash:e,hmac:(t,...r)=>l(e,t,(0,o.Id)(...r)),randomBytes:o.po}}function eL(e,t){let r=t=>eU({...e,...eN(t)});return{...r(t),create:r}}BigInt(4);let eR=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),eT=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),e$=BigInt(1),eF=BigInt(2),eP=(e,t)=>(e+t/eF)/t;function eH(e){let t=eR,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%t,f=u*u*e%t,c=W(f,r,t)*f%t,h=W(c,r,t)*f%t,d=W(h,eF,t)*u%t,p=W(d,i,t)*d%t,g=W(p,o,t)*p%t,y=W(g,a,t)*g%t,b=W(y,l,t)*y%t,w=W(b,a,t)*g%t,m=W(w,r,t)*f%t,E=W(m,s,t)*p%t,v=W(E,n,t)*u%t,x=W(v,eF,t);if(!eM.eql(eM.sqr(x),e))throw Error("Cannot find square root");return x}let eM=en(eR,void 0,void 0,{sqrt:eH}),eq=eL({a:BigInt(0),b:BigInt(7),Fp:eM,n:eT,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=eT,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-e$*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=eP(o*e,t),l=eP(-n*e,t),u=K(e-a*r-l*i,t),f=K(-a*n-l*o,t),c=u>s,h=f>s;if(c&&(u=t-u),h&&(f=t-f),u>s||f>s)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:u,k2neg:h,k2:f}}}},i.sc),ej=BigInt(0),ez={};function eD(e,...t){let r=ez[e];if(void 0===r){let t=(0,i.sc)(Uint8Array.from(e,e=>e.charCodeAt(0)));r=C(t,t),ez[e]=r}return(0,i.sc)(C(r,...t))}let eV=e=>e.toRawBytes(!0).slice(1),eK=e=>_(e,32),eZ=e=>K(e,eR),eW=e=>K(e,eT),eG=eq.ProjectivePoint,eY=(e,t,r)=>eG.BASE.multiplyAndAddUnsafe(e,t,r);function eJ(e){let t=eq.utils.normPrivateKeyToScalar(e),r=eG.fromPrivateKey(t);return{scalar:r.hasEvenY()?t:eW(-t),bytes:eV(r)}}function eQ(e){O("x",e,e$,eR);let t=eZ(e*e),r=eH(eZ(t*e+BigInt(7)));r%eF!==ej&&(r=eZ(-r));let n=new eG(e,r,e$);return n.assertValidity(),n}let eX=x;function e0(...e){return eW(eX(eD("BIP0340/challenge",...e)))}function e1(e,t,r){let n=k("signature",e,64),i=k("message",t),o=k("publicKey",r,32);try{let e=eQ(eX(o)),t=eX(n.subarray(0,32));if(!S(t,e$,eR))return!1;let r=eX(n.subarray(32,64));if(!S(r,e$,eT))return!1;let s=e0(eK(t),eV(e),i),a=eY(e,r,eW(-s));if(!a||!a.hasEvenY()||a.toAffine().x!==t)return!1;return!0}catch(e){return!1}}let e2={getPublicKey:function(e){return eJ(e).bytes},sign:function(e,t,r=(0,o.po)(32)){let n=k("message",e),{bytes:i,scalar:s}=eJ(t),a=eK(s^eX(eD("BIP0340/aux",k("auxRand",r,32)))),l=eW(eX(eD("BIP0340/nonce",a,i,n)));if(l===ej)throw Error("sign failed: k is zero");let{bytes:u,scalar:f}=eJ(l),c=e0(u,i,n),h=new Uint8Array(64);if(h.set(u,0),h.set(eK(eW(f+c*s)),32),!e1(h,n,i))throw Error("sign: Invalid signature produced");return h},verify:e1,utils:{randomPrivateKey:eq.utils.randomPrivateKey,lift_x:eQ,pointToBytes:eV,numberToBytesBE:_,bytesToNumberBE:x,taggedHash:eD,mod:K}}},9393:(e,t,r)=>{"use strict";function n(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function i(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function o(e,...t){if(!i(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function s(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function a(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function l(e,t){o(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}r.d(t,{CC:()=>a,DO:()=>o,Ht:()=>l,sd:()=>s})},8775:(e,t,r)=>{"use strict";r.d(t,{sc:()=>d});var n=r(9393),i=r(3331);function o(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(0xffffffff),s=Number(r>>i&o),a=Number(r&o),l=n?4:0,u=n?0:4;e.setUint32(t+l,s,n),e.setUint32(t+u,a,n)}function s(e,t,r){return e&t^~e&r}function a(e,t,r){return e&t^e&r^t&r}class l extends i.Vw{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,i.O8)(this.buffer)}update(e){(0,n.CC)(this);let{view:t,buffer:r,blockLen:o}=this,s=(e=(0,i.ZJ)(e)).length;for(let n=0;n<s;){let a=Math.min(o-this.pos,s-n);if(a===o){let t=(0,i.O8)(e);for(;o<=s-n;n+=o)this.process(t,n);continue}r.set(e.subarray(n,n+a),this.pos),this.pos+=a,n+=a,this.pos===o&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.CC)(this),(0,n.Ht)(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:s,isLE:a}=this,{pos:l}=this;t[l++]=128,this.buffer.subarray(l).fill(0),this.padOffset>s-l&&(this.process(r,0),l=0);for(let e=l;e<s;e++)t[e]=0;o(r,s-8,BigInt(8*this.length),a),this.process(r,0);let u=(0,i.O8)(e),f=this.outputLen;if(f%4)throw Error("_sha2: outputLen should be aligned to 32bit");let c=f/4,h=this.get();if(c>h.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)u.setUint32(4*e,h[e],a)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}}let u=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),f=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),c=new Uint32Array(64);class h extends l{constructor(){super(64,32,8,!1),this.A=0|f[0],this.B=0|f[1],this.C=0|f[2],this.D=0|f[3],this.E=0|f[4],this.F=0|f[5],this.G=0|f[6],this.H=0|f[7]}get(){let{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)c[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=c[e-15],r=c[e-2],n=(0,i.Ow)(t,7)^(0,i.Ow)(t,18)^t>>>3,o=(0,i.Ow)(r,17)^(0,i.Ow)(r,19)^r>>>10;c[e]=o+c[e-7]+n+c[e-16]|0}let{A:r,B:n,C:o,D:l,E:f,F:h,G:d,H:p}=this;for(let e=0;e<64;e++){let t=p+((0,i.Ow)(f,6)^(0,i.Ow)(f,11)^(0,i.Ow)(f,25))+s(f,h,d)+u[e]+c[e]|0,g=((0,i.Ow)(r,2)^(0,i.Ow)(r,13)^(0,i.Ow)(r,22))+a(r,n,o)|0;p=d,d=h,h=f,f=l+t|0,l=o,o=n,n=r,r=t+g|0}r=r+this.A|0,n=n+this.B|0,o=o+this.C|0,l=l+this.D|0,f=f+this.E|0,h=h+this.F|0,d=d+this.G|0,p=p+this.H|0,this.set(r,n,o,l,f,h,d,p)}roundClean(){c.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let d=(0,i.ld)(()=>new h)},3331:(e,t,r)=>{"use strict";r.d(t,{Vw:()=>g,My:()=>l,Id:()=>p,O8:()=>o,aT:()=>c,po:()=>b,Ow:()=>s,ZJ:()=>d,ld:()=>y});let n="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;var i=r(9393);function o(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function s(e,t){return e<<32-t|e>>>t}let a=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function l(e){(0,i.DO)(e);let t="";for(let r=0;r<e.length;r++)t+=a[e[r]];return t}let u={_0:48,_9:57,A:65,F:70,a:97,f:102};function f(e){return e>=u._0&&e<=u._9?e-u._0:e>=u.A&&e<=u.F?e-(u.A-10):e>=u.a&&e<=u.f?e-(u.a-10):void 0}function c(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=f(e.charCodeAt(i)),o=f(e.charCodeAt(i+1));if(void 0===r||void 0===o)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);n[t]=16*r+o}return n}function h(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function d(e){return"string"==typeof e&&(e=h(e)),(0,i.DO)(e),e}function p(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];(0,i.DO)(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r}class g{clone(){return this._cloneInto()}}function y(e){let t=t=>e().update(d(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function b(e=32){if(n&&"function"==typeof n.getRandomValues)return n.getRandomValues(new Uint8Array(e));if(n&&"function"==typeof n.randomBytes)return n.randomBytes(e);throw Error("crypto.getRandomValues must be defined")}},3947:(e,t,r)=>{"use strict";function n(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function i(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every(e=>"string"==typeof e):t.every(e=>Number.isSafeInteger(e))))}function o(e){if("function"!=typeof e)throw Error("function expected");return!0}function s(e,t){if("string"!=typeof t)throw Error(`${e}: string expected`);return!0}function a(e){if(!Number.isSafeInteger(e))throw Error(`invalid integer: ${e}`)}function l(e){if(!Array.isArray(e))throw Error("array expected")}function u(e,t){if(!i(!0,t))throw Error(`${e}: array of strings expected`)}function f(e,t){if(!i(!1,t))throw Error(`${e}: array of numbers expected`)}function c(...e){let t=e=>e,r=(e,t)=>r=>e(t(r));return{encode:e.map(e=>e.encode).reduceRight(r,t),decode:e.map(e=>e.decode).reduce(r,t)}}function h(e){let t="string"==typeof e?e.split(""):e,r=t.length;u("alphabet",t);let n=new Map(t.map((e,t)=>[e,t]));return{encode:n=>(l(n),n.map(n=>{if(!Number.isSafeInteger(n)||n<0||n>=r)throw Error(`alphabet.encode: digit index outside alphabet "${n}". Allowed: ${e}`);return t[n]})),decode:t=>(l(t),t.map(t=>{s("alphabet.decode",t);let r=n.get(t);if(void 0===r)throw Error(`Unknown letter: "${t}". Allowed: ${e}`);return r}))}}function d(e=""){return s("join",e),{encode:t=>(u("join.decode",t),t.join(e)),decode:t=>(s("join.decode",t),t.split(e))}}r.d(t,{I:()=>_});let p=(e,t)=>0===t?e:p(t,e%t),g=(e,t)=>e+(t-p(e,t)),y=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function b(e,t,r,n){if(l(e),t<=0||t>32)throw Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw Error(`convertRadix2: wrong to=${r}`);if(g(t,r)>32)throw Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${g(t,r)}`);let i=0,o=0,s=y[t],u=y[r]-1,f=[];for(let n of e){if(a(n),n>=s)throw Error(`convertRadix2: invalid data word=${n} from=${t}`);if(i=i<<t|n,o+t>32)throw Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=r;o-=r)f.push((i>>o-r&u)>>>0);let e=y[o];if(void 0===e)throw Error("invalid carry");i&=e-1}if(i=i<<r-o&u,!n&&o>=t)throw Error("Excess padding");if(!n&&i>0)throw Error(`Non-zero padding: ${i}`);return n&&o>0&&f.push(i>>>0),f}function w(e,t=!1){if(a(e),e<=0||e>32)throw Error("radix2: bits should be in (0..32]");if(g(8,e)>32||g(e,8)>32)throw Error("radix2: carry overflow");return{encode:r=>{if(!n(r))throw Error("radix2.encode input should be Uint8Array");return b(Array.from(r),8,e,!t)},decode:r=>(f("radix2.decode",r),Uint8Array.from(b(r,e,8,t)))}}function m(e){return o(e),function(...t){try{return e.apply(null,t)}catch(e){}}}let E=c(h("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),d("")),v=[0x3b6a57b2,0x26508e6d,0x1ea119fa,0x3d4233dd,0x2a1462b3];function x(e){let t=e>>25,r=(0x1ffffff&e)<<5;for(let e=0;e<v.length;e++)(t>>e&1)==1&&(r^=v[e]);return r}function A(e,t,r=1){let n=e.length,i=1;for(let t=0;t<n;t++){let r=e.charCodeAt(t);if(r<33||r>126)throw Error(`Invalid prefix (${e})`);i=x(i)^r>>5}i=x(i);for(let t=0;t<n;t++)i=x(i)^31&e.charCodeAt(t);for(let e of t)i=x(i)^e;for(let e=0;e<6;e++)i=x(i);return i^=r,E.encode(b([i%y[30]],30,5,!1))}let _=function(e){let t="bech32"===e?1:0x2bc830a3,r=w(5),i=r.decode,o=r.encode,a=m(i);function l(e,r,i=90){s("bech32.encode prefix",e),n(r)&&(r=Array.from(r)),f("bech32.encode",r);let o=e.length;if(0===o)throw TypeError(`Invalid prefix length ${o}`);let a=o+7+r.length;if(!1!==i&&a>i)throw TypeError(`Length ${a} exceeds limit ${i}`);let u=e.toLowerCase(),c=A(u,r,t);return`${u}1${E.encode(r)}${c}`}function u(e,r=90){s("bech32.decode input",e);let n=e.length;if(n<8||!1!==r&&n>r)throw TypeError(`invalid string length: ${n} (${e}). Expected (8..${r})`);let i=e.toLowerCase();if(e!==i&&e!==e.toUpperCase())throw Error("String must be lowercase or uppercase");let o=i.lastIndexOf("1");if(0===o||-1===o)throw Error('Letter "1" must be present between prefix and data only');let a=i.slice(0,o),l=i.slice(o+1);if(l.length<6)throw Error("Data must be at least 6 characters long");let f=E.decode(l).slice(0,-6),c=A(a,f,t);if(!l.endsWith(c))throw Error(`Invalid checksum in ${e}: expected "${c}"`);return{prefix:a,words:f}}let c=m(u);function h(e){let{prefix:t,words:r}=u(e,!1);return{prefix:t,words:r,bytes:i(r)}}function d(e,t){return l(e,o(t))}return{encode:l,decode:u,encodeFromBytes:d,decodeToBytes:h,decodeUnsafe:c,fromWords:i,fromWordsUnsafe:a,toWords:o}}("bech32")},9524:(e,t,r)=>{"use strict";r.d(t,{pC:()=>nm,Bq:()=>nb,lG:()=>nw,XN:()=>iz,sh:()=>os,Qe:()=>i0,Q5:()=>oD,_Y:()=>o5});var n,i,o,s,a,l,u={};function f(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`Wrong positive integer: ${e}`)}function c(e,...t){if(!(e instanceof Uint8Array))throw Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function h(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");f(e.outputLen),f(e.blockLen)}function d(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function p(e,t){c(e);let r=t.outputLen;if(e.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}r.r(u),r.d(u,{OG:()=>Z,My:()=>P,Ph:()=>q,lX:()=>j,Id:()=>K,fg:()=>Y,qj:()=>V,aT:()=>M,lq:()=>z,z:()=>D,Q5:()=>Q});let g="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,y=e=>e instanceof Uint8Array,b=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),w=(e,t)=>e<<32-t|e>>>t;if(68!==new Uint8Array(new Uint32Array([0x11223344]).buffer)[0])throw Error("Non little-endian hardware is not supported");function m(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function E(e){if("string"==typeof e&&(e=m(e)),!y(e))throw Error(`expected Uint8Array, got ${typeof e}`);return e}function v(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!y(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t}class x{clone(){return this._cloneInto()}}function A(e){let t=t=>e().update(E(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function _(e=32){if(g&&"function"==typeof g.getRandomValues)return g.getRandomValues(new Uint8Array(e));throw Error("crypto.getRandomValues must be defined")}function B(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(0xffffffff),s=Number(r>>i&o),a=Number(r&o),l=n?4:0,u=n?0:4;e.setUint32(t+l,s,n),e.setUint32(t+u,a,n)}class k extends x{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=b(this.buffer)}update(e){d(this);let{view:t,buffer:r,blockLen:n}=this,i=(e=E(e)).length;for(let o=0;o<i;){let s=Math.min(n-this.pos,i-o);if(s===n){let t=b(e);for(;n<=i-o;o+=n)this.process(t,o);continue}r.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){d(this),p(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:n,isLE:i}=this,{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let e=o;e<n;e++)t[e]=0;B(r,n-8,BigInt(8*this.length),i),this.process(r,0);let s=b(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=a/4,u=this.get();if(l>u.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)s.setUint32(4*e,u[e],i)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}}let C=(e,t,r)=>e&t^~e&r,I=(e,t,r)=>e&t^e&r^t&r,S=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),O=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),U=new Uint32Array(64);class N extends k{constructor(){super(64,32,8,!1),this.A=0|O[0],this.B=0|O[1],this.C=0|O[2],this.D=0|O[3],this.E=0|O[4],this.F=0|O[5],this.G=0|O[6],this.H=0|O[7]}get(){let{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)U[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=U[e-15],r=U[e-2],n=w(t,7)^w(t,18)^t>>>3,i=w(r,17)^w(r,19)^r>>>10;U[e]=i+U[e-7]+n+U[e-16]|0}let{A:r,B:n,C:i,D:o,E:s,F:a,G:l,H:u}=this;for(let e=0;e<64;e++){let t=u+(w(s,6)^w(s,11)^w(s,25))+C(s,a,l)+S[e]+U[e]|0,f=(w(r,2)^w(r,13)^w(r,22))+I(r,n,i)|0;u=l,l=a,a=s,s=o+t|0,o=i,i=n,n=r,r=t+f|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,n,i,o,s,a,l,u)}roundClean(){U.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let L=A(()=>new N),R=(BigInt(0),BigInt(1)),T=BigInt(2),$=e=>e instanceof Uint8Array,F=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function P(e){if(!$(e))throw Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=F[e[r]];return t}function H(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function M(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let t=0;t<r.length;t++){let n=2*t,i=Number.parseInt(e.slice(n,n+2),16);if(Number.isNaN(i)||i<0)throw Error("Invalid byte sequence");r[t]=i}return r}function q(e){return H(P(e))}function j(e){if(!$(e))throw Error("Uint8Array expected");return H(P(Uint8Array.from(e).reverse()))}function z(e,t){return M(e.toString(16).padStart(2*t,"0"))}function D(e,t){return z(e,t).reverse()}function V(e,t,r){let n;if("string"==typeof t)try{n=M(t)}catch(r){throw Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else if($(t))n=Uint8Array.from(t);else throw Error(`${e} must be hex string or Uint8Array`);let i=n.length;if("number"==typeof r&&i!==r)throw Error(`${e} expected ${r} bytes, got ${i}`);return n}function K(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!$(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t}let Z=e=>(T<<BigInt(e-1))-R,W=e=>new Uint8Array(e),G=e=>Uint8Array.from(e);function Y(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=W(e),i=W(e),o=0,s=()=>{n.fill(1),i.fill(0),o=0},a=(...e)=>r(i,n,...e),l=(e=W())=>{i=a(G([0]),e),n=a(),0!==e.length&&(i=a(G([1]),e),n=a())},u=()=>{if(o++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(n=a()).slice();r.push(t),e+=n.length}return K(...r)};return(e,t)=>{let r;for(s(),l(e);!(r=t(u()));)l();return s(),r}}let J={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function Q(e,t,r={}){let n=(t,r,n)=>{let i=J[r];if("function"!=typeof i)throw Error(`Invalid validator "${r}", expected function`);let o=e[t];if((!n||void 0!==o)&&!i(o,e))throw Error(`Invalid param ${String(t)}=${o} (${typeof o}), expected ${r}`)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e}let X=BigInt(0),ee=BigInt(1),et=BigInt(2),er=BigInt(3),en=BigInt(4),ei=BigInt(5),eo=BigInt(8);function es(e,t){let r=e%t;return r>=X?r:t+r}function ea(e,t,r){if(r<=X||t<X)throw Error("Expected power/modulo > 0");if(r===ee)return X;let n=ee;for(;t>X;)t&ee&&(n=n*e%r),e=e*e%r,t>>=ee;return n}function el(e,t,r){let n=e;for(;t-- >X;)n*=n,n%=r;return n}function eu(e,t){if(e===X||t<=X)throw Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=es(e,t),n=t,i=X,o=ee,s=ee,a=X;for(;r!==X;){let e=n/r,t=n%r,l=i-s*e,u=o-a*e;n=r,r=t,i=s,o=a,s=l,a=u}if(n!==ee)throw Error("invert: does not exist");return es(i,t)}function ef(e){let t,r,n;let i=(e-ee)/et;for(t=e-ee,r=0;t%et===X;t/=et,r++);for(n=et;n<e&&ea(n,i,e)!==e-ee;n++);if(1===r){let t=(e+ee)/en;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}let o=(t+ee)/et;return function(e,s){if(e.pow(s,i)===e.neg(e.ONE))throw Error("Cannot find square root");let a=r,l=e.pow(e.mul(e.ONE,n),t),u=e.pow(s,o),f=e.pow(s,t);for(;!e.eql(f,e.ONE);){if(e.eql(f,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(f);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,ee<<BigInt(a-t-1));l=e.sqr(r),u=e.mul(u,r),f=e.mul(f,l),a=t}return u}}function ec(e){if(e%en===er){let t=(e+ee)/en;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}if(e%eo===ei){let t=(e-ei)/eo;return function(e,r){let n=e.mul(r,et),i=e.pow(n,t),o=e.mul(r,i),s=e.mul(e.mul(o,et),i),a=e.mul(o,e.sub(s,e.ONE));if(!e.eql(e.sqr(a),r))throw Error("Cannot find square root");return a}}return ef(e)}BigInt(9),BigInt(16);let eh=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ed(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"};return Q(e,eh.reduce((e,t)=>(e[t]="function",e),t))}function ep(e,t,r){if(r<X)throw Error("Expected power > 0");if(r===X)return e.ONE;if(r===ee)return t;let n=e.ONE,i=t;for(;r>X;)r&ee&&(n=e.mul(n,i)),i=e.sqr(i),r>>=ee;return n}function eg(e,t){let r=Array(t.length),n=t.reduce((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n)),e.ONE),i=e.inv(n);return t.reduceRight((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n)),i),r}function ey(e,t){let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function eb(e,t,r=!1,n={}){if(e<=X)throw Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:i,nByteLength:o}=ey(e,t);if(o>2048)throw Error("Field lengths over 2048 bytes are not supported");let s=ec(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:Z(i),ZERO:X,ONE:ee,create:t=>es(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error(`Invalid field element: expected bigint, got ${typeof t}`);return X<=t&&t<e},is0:e=>e===X,isOdd:e=>(e&ee)===ee,neg:t=>es(-t,e),eql:(e,t)=>e===t,sqr:t=>es(t*t,e),add:(t,r)=>es(t+r,e),sub:(t,r)=>es(t-r,e),mul:(t,r)=>es(t*r,e),pow:(e,t)=>ep(a,e,t),div:(t,r)=>es(t*eu(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>eu(t,e),sqrt:n.sqrt||(e=>s(a,e)),invertBatch:e=>eg(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?D(e,o):z(e,o),fromBytes:e=>{if(e.length!==o)throw Error(`Fp.fromBytes: expected ${o}, got ${e.length}`);return r?j(e):q(e)}});return Object.freeze(a)}function ew(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function em(e){let t=ew(e);return t+Math.ceil(t/2)}function eE(e,t,r=!1){let n=e.length,i=ew(t),o=em(t);if(n<16||n<o||n>1024)throw Error(`expected ${o}-1024 bytes of input, got ${n}`);let s=es(r?q(e):j(e),t-ee)+ee;return r?D(s,i):z(s,i)}class ev extends x{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,h(e);let r=E(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return d(this),this.iHash.update(e),this}digestInto(e){d(this),c(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let ex=(e,t,r)=>new ev(e,t).update(r).digest();ex.create=(e,t)=>new ev(e,t);let eA=BigInt(0),e_=BigInt(1);function eB(e,t){let r=(e,t)=>{let r=t.negate();return e?r:t},n=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let n=e.ZERO,i=t;for(;r>eA;)r&e_&&(n=n.add(i)),i=i.double(),r>>=e_;return n},precomputeWindow(e,t){let{windows:r,windowSize:i}=n(t),o=[],s=e,a=s;for(let e=0;e<r;e++){a=s,o.push(a);for(let e=1;e<i;e++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(t,i,o){let{windows:s,windowSize:a}=n(t),l=e.ZERO,u=e.BASE,f=BigInt(2**t-1),c=2**t,h=BigInt(t);for(let e=0;e<s;e++){let t=e*a,n=Number(o&f);o>>=h,n>a&&(n-=c,o+=e_);let s=t,d=t+Math.abs(n)-1,p=e%2!=0,g=n<0;0===n?u=u.add(r(p,i[s])):l=l.add(r(g,i[d]))}return{p:l,f:u}},wNAFCached(e,t,r,n){let i=e._WINDOW_SIZE||1,o=t.get(e);return o||(o=this.precomputeWindow(e,i),1!==i&&t.set(e,n(o))),this.wNAF(i,o,r)}}}function ek(e){return ed(e.Fp),Q(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ey(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function eC(e){let t=ek(e);Q(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}let{Ph:eI,aT:eS}=u,eO={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){let{Err:t}=eO;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(128&n[0])throw new t("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:eI(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=eO,r="string"==typeof e?eS(e):e;if(!(r instanceof Uint8Array))throw Error("ui8a expected");let n=r.length;if(n<2||48!=r[0])throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:i,l:o}=eO._parseInt(r.subarray(2)),{d:s,l:a}=eO._parseInt(o);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(e){let t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{let t=e.toString(16);return 1&t.length?`0${t}`:t},n=t(r(e.s)),i=t(r(e.r)),o=n.length/2,s=i.length/2,a=r(o),l=r(s);return`30${r(s+o+4)}02${l}${i}02${a}${n}`}},eU=BigInt(0),eN=BigInt(1),eL=(BigInt(2),BigInt(3));function eR(e){let t=eC(e),{Fp:r}=t,n=t.toBytes||((e,t,n)=>{let i=t.toAffine();return K(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),i=t.fromBytes||(e=>{let t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function o(e){let{a:n,b:i}=t,o=r.sqr(e),s=r.mul(o,e);return r.add(r.add(s,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw Error("bad generator point: equation left != right");function s(e){return"bigint"==typeof e&&eU<e&&e<t.n}function a(e){if(!s(e))throw Error("Expected valid bigint: 0 < bigint < curve.n")}function l(e){let r;let{allowedPrivateKeyLengths:n,nByteLength:i,wrapPrivateKey:o,n:s}=t;if(n&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=P(e)),"string"!=typeof e||!n.includes(e.length))throw Error("Invalid key");e=e.padStart(2*i,"0")}try{r="bigint"==typeof e?e:q(V("private key",e,i))}catch(t){throw Error(`private key must be ${i} bytes, hex or bigint, not ${typeof e}`)}return o&&(r=es(r,s)),a(r),r}let u=new Map;function f(e){if(!(e instanceof c))throw Error("ProjectivePoint expected")}class c{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw Error("x required");if(null==t||!r.isValid(t))throw Error("y required");if(null==n||!r.isValid(n))throw Error("z required")}static fromAffine(e){let{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw Error("invalid affine point");if(e instanceof c)throw Error("projective point not allowed");let i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?c.ZERO:new c(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(c.fromAffine)}static fromHex(e){let t=c.fromAffine(i(V("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return c.BASE.multiply(l(e))}_setWindowSize(e){this._WINDOW_SIZE=e,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw Error("bad point: ZERO")}let{x:e,y:n}=this.toAffine();if(!r.isValid(e)||!r.isValid(n))throw Error("bad point: x or y not FE");let i=r.sqr(n),s=o(e);if(!r.eql(i,s))throw Error("bad point: equation left != right");if(!this.isTorsionFree())throw Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){f(e);let{px:t,py:n,pz:i}=this,{px:o,py:s,pz:a}=e,l=r.eql(r.mul(t,a),r.mul(o,i)),u=r.eql(r.mul(n,a),r.mul(s,i));return l&&u}negate(){return new c(this.px,r.neg(this.py),this.pz)}double(){let{a:e,b:n}=t,i=r.mul(n,eL),{px:o,py:s,pz:a}=this,l=r.ZERO,u=r.ZERO,f=r.ZERO,h=r.mul(o,o),d=r.mul(s,s),p=r.mul(a,a),g=r.mul(o,s);return g=r.add(g,g),f=r.mul(o,a),f=r.add(f,f),l=r.mul(e,f),u=r.mul(i,p),u=r.add(l,u),l=r.sub(d,u),u=r.add(d,u),u=r.mul(l,u),l=r.mul(g,l),f=r.mul(i,f),p=r.mul(e,p),g=r.sub(h,p),g=r.mul(e,g),g=r.add(g,f),f=r.add(h,h),h=r.add(f,h),h=r.add(h,p),h=r.mul(h,g),u=r.add(u,h),p=r.mul(s,a),p=r.add(p,p),h=r.mul(p,g),l=r.sub(l,h),f=r.mul(p,d),f=r.add(f,f),new c(l,u,f=r.add(f,f))}add(e){f(e);let{px:n,py:i,pz:o}=this,{px:s,py:a,pz:l}=e,u=r.ZERO,h=r.ZERO,d=r.ZERO,p=t.a,g=r.mul(t.b,eL),y=r.mul(n,s),b=r.mul(i,a),w=r.mul(o,l),m=r.add(n,i),E=r.add(s,a);m=r.mul(m,E),E=r.add(y,b),m=r.sub(m,E),E=r.add(n,o);let v=r.add(s,l);return E=r.mul(E,v),v=r.add(y,w),E=r.sub(E,v),v=r.add(i,o),u=r.add(a,l),v=r.mul(v,u),u=r.add(b,w),v=r.sub(v,u),d=r.mul(p,E),u=r.mul(g,w),d=r.add(u,d),u=r.sub(b,d),d=r.add(b,d),h=r.mul(u,d),b=r.add(y,y),b=r.add(b,y),w=r.mul(p,w),E=r.mul(g,E),b=r.add(b,w),w=r.sub(y,w),w=r.mul(p,w),E=r.add(E,w),y=r.mul(b,E),h=r.add(h,y),y=r.mul(v,E),u=r.mul(m,u),u=r.sub(u,y),y=r.mul(m,b),d=r.mul(v,d),new c(u,h,d=r.add(d,y))}subtract(e){return this.add(e.negate())}is0(){return this.equals(c.ZERO)}wNAF(e){return d.wNAFCached(this,u,e,e=>{let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(c.fromAffine)})}multiplyUnsafe(e){let n=c.ZERO;if(e===eU)return n;if(a(e),e===eN)return this;let{endo:i}=t;if(!i)return d.unsafeLadder(this,e);let{k1neg:o,k1:s,k2neg:l,k2:u}=i.splitScalar(e),f=n,h=n,p=this;for(;s>eU||u>eU;)s&eN&&(f=f.add(p)),u&eN&&(h=h.add(p)),p=p.double(),s>>=eN,u>>=eN;return o&&(f=f.negate()),l&&(h=h.negate()),h=new c(r.mul(h.px,i.beta),h.py,h.pz),f.add(h)}multiply(e){let n,i;a(e);let o=e,{endo:s}=t;if(s){let{k1neg:e,k1:t,k2neg:a,k2:l}=s.splitScalar(o),{p:u,f:f}=this.wNAF(t),{p:h,f:p}=this.wNAF(l);u=d.constTimeNegate(e,u),h=d.constTimeNegate(a,h),h=new c(r.mul(h.px,s.beta),h.py,h.pz),n=u.add(h),i=f.add(p)}else{let{p:e,f:t}=this.wNAF(o);n=e,i=t}return c.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(e,t,r){let n=c.BASE,i=(e,t)=>t!==eU&&t!==eN&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),o=i(this,t).add(i(e,r));return o.is0()?void 0:o}toAffine(e){let{px:t,py:n,pz:i}=this,o=this.is0();null==e&&(e=o?r.ONE:r.inv(i));let s=r.mul(t,e),a=r.mul(n,e),l=r.mul(i,e);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){let{h:e,isTorsionFree:r}=t;if(e===eN)return!0;if(r)return r(c,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:r}=t;return e===eN?this:r?r(c,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),n(c,this,e)}toHex(e=!0){return P(this.toRawBytes(e))}}c.BASE=new c(t.Gx,t.Gy,r.ONE),c.ZERO=new c(r.ZERO,r.ONE,r.ZERO);let h=t.nBitLength,d=eB(c,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:s}}function eT(e){let t=ek(e);return Q(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function e$(e){let t=eT(e),{Fp:r,n:n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function s(e){return eU<e&&e<r.ORDER}function a(e){return es(e,n)}function l(e){return eu(e,n)}let{ProjectivePoint:u,normPrivateKeyToScalar:f,weierstrassEquation:c,isWithinCurveOrder:h}=eR({...t,toBytes(e,t,n){let i=t.toAffine(),o=r.toBytes(i.x),s=K;return n?s(Uint8Array.from([t.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,r.toBytes(i.y))},fromBytes(e){let t=e.length,n=e[0],a=e.subarray(1);if(t===i&&(2===n||3===n)){let e=q(a);if(!s(e))throw Error("Point is not on curve");let t=c(e),i=r.sqrt(t);return(1&n)==1!=((i&eN)===eN)&&(i=r.neg(i)),{x:e,y:i}}if(t===o&&4===n)return{x:r.fromBytes(a.subarray(0,r.BYTES)),y:r.fromBytes(a.subarray(r.BYTES,2*r.BYTES))};throw Error(`Point of length ${t} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),d=e=>P(z(e,t.nByteLength));function p(e){return e>n>>eN}function g(e){return p(e)?a(-e):e}let y=(e,t,r)=>q(e.slice(t,r));class b{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let r=t.nByteLength;return new b(y(e=V("compactSignature",e,2*r),0,r),y(e,r,2*r))}static fromDER(e){let{r:t,s:r}=eO.toSig(V("DER",e));return new b(t,r)}assertValidity(){if(!h(this.r))throw Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new b(this.r,this.s,e)}recoverPublicKey(e){let{r:n,s:i,recovery:o}=this,s=A(V("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw Error("recovery id invalid");let f=2===o||3===o?n+t.n:n;if(f>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let c=(1&o)==0?"02":"03",h=u.fromHex(c+d(f)),p=l(f),g=a(-s*p),y=a(i*p),b=u.BASE.multiplyAndAddUnsafe(h,g,y);if(!b)throw Error("point at infinify");return b.assertValidity(),b}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new b(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return M(this.toDERHex())}toDERHex(){return eO.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return M(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}let w={isValidPrivateKey(e){try{return f(e),!0}catch(e){return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{let e=em(t.n);return eE(t.randomBytes(e),t.n)},precompute:(e=8,t=u.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function m(e,t=!0){return u.fromPrivateKey(e).toRawBytes(t)}function E(e){let t=e instanceof Uint8Array,r="string"==typeof e,n=(t||r)&&e.length;return t?n===i||n===o:r?n===2*i||n===2*o:e instanceof u}function v(e,t,r=!0){if(E(e))throw Error("first arg must be private key");if(!E(t))throw Error("second arg must be public key");return u.fromHex(t).multiply(f(e)).toRawBytes(r)}let x=t.bits2int||function(e){let r=q(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},A=t.bits2int_modN||function(e){return a(x(e))},_=Z(t.nBitLength);function B(e){if("bigint"!=typeof e)throw Error("bigint expected");if(!(eU<=e&&e<_))throw Error(`bigint expected < 2^${t.nBitLength}`);return z(e,t.nByteLength)}function k(e,n,i=C){if(["recovered","canonical"].some(e=>e in i))throw Error("sign() legacy options not supported");let{hash:o,randomBytes:s}=t,{lowS:c,prehash:d,extraEntropy:y}=i;null==c&&(c=!0),e=V("msgHash",e),d&&(e=V("prehashed msgHash",o(e)));let w=A(e),m=f(n),E=[B(m),B(w)];if(null!=y){let e=!0===y?s(r.BYTES):y;E.push(V("extraEntropy",e))}let v=K(...E),_=w;return{seed:v,k2sig:function(e){let t=x(e);if(!h(t))return;let r=l(t),n=u.BASE.multiply(t).toAffine(),i=a(n.x);if(i===eU)return;let o=a(r*a(_+i*m));if(o===eU)return;let s=(n.x===i?0:2)|Number(n.y&eN),f=o;return c&&p(o)&&(f=g(o),s^=1),new b(i,f,s)}}}let C={lowS:t.lowS,prehash:!1},I={lowS:t.lowS,prehash:!1};function S(e,r,n=C){let{seed:i,k2sig:o}=k(e,r,n),s=t;return Y(s.hash.outputLen,s.nByteLength,s.hmac)(i,o)}function O(e,r,n,i=I){let o,s;let f=e;if(r=V("msgHash",r),n=V("publicKey",n),"strict"in i)throw Error("options.strict was renamed to lowS");let{lowS:c,prehash:h}=i;try{if("string"==typeof f||f instanceof Uint8Array)try{s=b.fromDER(f)}catch(e){if(!(e instanceof eO.Err))throw e;s=b.fromCompact(f)}else if("object"==typeof f&&"bigint"==typeof f.r&&"bigint"==typeof f.s){let{r:e,s:t}=f;s=new b(e,t)}else throw Error("PARSE");o=u.fromHex(n)}catch(e){if("PARSE"===e.message)throw Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&s.hasHighS())return!1;h&&(r=t.hash(r));let{r:d,s:p}=s,g=A(r),y=l(p),w=a(g*y),m=a(d*y),E=u.BASE.multiplyAndAddUnsafe(o,w,m)?.toAffine();return!!E&&a(E.x)===d}return u.BASE._setWindowSize(8),{CURVE:t,getPublicKey:m,getSharedSecret:v,sign:S,verify:O,ProjectivePoint:u,Signature:b,utils:w}}function eF(e){return{hash:e,hmac:(t,...r)=>ex(e,t,v(...r)),randomBytes:_}}function eP(e,t){let r=t=>e$({...e,...eF(t)});return Object.freeze({...r(t),create:r})}BigInt(4);let eH=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),eM=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),eq=BigInt(1),ej=BigInt(2),ez=(e,t)=>(e+t/ej)/t;function eD(e){let t=eH,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%t,f=u*u*e%t,c=el(f,r,t)*f%t,h=el(c,r,t)*f%t,d=el(h,ej,t)*u%t,p=el(d,i,t)*d%t,g=el(p,o,t)*p%t,y=el(g,a,t)*g%t,b=el(y,l,t)*y%t,w=el(b,a,t)*g%t,m=el(w,r,t)*f%t,E=el(m,s,t)*p%t,v=el(E,n,t)*u%t,x=el(v,ej,t);if(!eV.eql(eV.sqr(x),e))throw Error("Cannot find square root");return x}let eV=eb(eH,void 0,void 0,{sqrt:eD}),eK=eP({a:BigInt(0),b:BigInt(7),Fp:eV,n:eM,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=eM,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-eq*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=ez(o*e,t),l=ez(-n*e,t),u=es(e-a*r-l*i,t),f=es(-a*n-l*o,t),c=u>s,h=f>s;if(c&&(u=t-u),h&&(f=t-f),u>s||f>s)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:u,k2neg:h,k2:f}}}},L),eZ=BigInt(0),eW=e=>"bigint"==typeof e&&eZ<e&&e<eH,eG=e=>"bigint"==typeof e&&eZ<e&&e<eM,eY={};function eJ(e,...t){let r=eY[e];if(void 0===r){let t=L(Uint8Array.from(e,e=>e.charCodeAt(0)));r=K(t,t),eY[e]=r}return L(K(r,...t))}let eQ=e=>e.toRawBytes(!0).slice(1),eX=e=>z(e,32),e0=e=>es(e,eH),e1=e=>es(e,eM),e2=eK.ProjectivePoint,e3=(e,t,r)=>e2.BASE.multiplyAndAddUnsafe(e,t,r);function e8(e){let t=eK.utils.normPrivateKeyToScalar(e),r=e2.fromPrivateKey(t);return{scalar:r.hasEvenY()?t:e1(-t),bytes:eQ(r)}}function e6(e){if(!eW(e))throw Error("bad x: need 0 < x < p");let t=e0(e*e),r=eD(e0(t*e+BigInt(7)));r%ej!==eZ&&(r=e0(-r));let n=new e2(e,r,eq);return n.assertValidity(),n}function e5(...e){return e1(q(eJ("BIP0340/challenge",...e)))}function e4(e,t,r){let n=V("signature",e,64),i=V("message",t),o=V("publicKey",r,32);try{let e=e6(q(o)),t=q(n.subarray(0,32));if(!eW(t))return!1;let r=q(n.subarray(32,64));if(!eG(r))return!1;let s=e5(eX(t),eQ(e),i),a=e3(e,r,e1(-s));if(!a||!a.hasEvenY()||a.toAffine().x!==t)return!1;return!0}catch(e){return!1}}let e9={getPublicKey:function(e){return e8(e).bytes},sign:function(e,t,r=_(32)){let n=V("message",e),{bytes:i,scalar:o}=e8(t),s=eX(o^q(eJ("BIP0340/aux",V("auxRand",r,32)))),a=e1(q(eJ("BIP0340/nonce",s,i,n)));if(a===eZ)throw Error("sign failed: k is zero");let{bytes:l,scalar:u}=e8(a),f=e5(l,i,n),c=new Uint8Array(64);if(c.set(l,0),c.set(eX(e1(u+f*o)),32),!e4(c,n,i))throw Error("sign: Invalid signature produced");return c},verify:e4,utils:{randomPrivateKey:eK.utils.randomPrivateKey,lift_x:e6,pointToBytes:eQ,numberToBytesBE:z,bytesToNumberBE:q,taggedHash:eJ,mod:es}},e7="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,te=e=>e instanceof Uint8Array,tt=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),tr=(e,t)=>e<<32-t|e>>>t;if(68!==new Uint8Array(new Uint32Array([0x11223344]).buffer)[0])throw Error("Non little-endian hardware is not supported");let tn=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ti(e){if(!te(e))throw Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=tn[e[r]];return t}function to(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let t=0;t<r.length;t++){let n=2*t,i=Number.parseInt(e.slice(n,n+2),16);if(Number.isNaN(i)||i<0)throw Error("Invalid byte sequence");r[t]=i}return r}function ts(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function ta(e){if("string"==typeof e&&(e=ts(e)),!te(e))throw Error(`expected Uint8Array, got ${typeof e}`);return e}function tl(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!te(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t}class tu{clone(){return this._cloneInto()}}function tf(e){let t=t=>e().update(ta(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function tc(e=32){if(e7&&"function"==typeof e7.getRandomValues)return e7.getRandomValues(new Uint8Array(e));throw Error("crypto.getRandomValues must be defined")}function th(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`Wrong positive integer: ${e}`)}function td(e,...t){if(!(e instanceof Uint8Array))throw Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function tp(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");th(e.outputLen),th(e.blockLen)}function tg(e,t){td(e);let r=t.outputLen;if(e.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}let ty={number:th,bytes:td,hash:tp,exists:function(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")},output:tg};function tb(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(0xffffffff),s=Number(r>>i&o),a=Number(r&o),l=n?4:0,u=n?0:4;e.setUint32(t+l,s,n),e.setUint32(t+u,a,n)}class tw extends tu{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=tt(this.buffer)}update(e){ty.exists(this);let{view:t,buffer:r,blockLen:n}=this,i=(e=ta(e)).length;for(let o=0;o<i;){let s=Math.min(n-this.pos,i-o);if(s===n){let t=tt(e);for(;n<=i-o;o+=n)this.process(t,o);continue}r.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ty.exists(this),ty.output(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:n,isLE:i}=this,{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let e=o;e<n;e++)t[e]=0;tb(r,n-8,BigInt(8*this.length),i),this.process(r,0);let s=tt(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=a/4,u=this.get();if(l>u.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)s.setUint32(4*e,u[e],i)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}}let tm=(e,t,r)=>e&t^~e&r,tE=(e,t,r)=>e&t^e&r^t&r,tv=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),tx=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),tA=new Uint32Array(64);class t_ extends tw{constructor(){super(64,32,8,!1),this.A=0|tx[0],this.B=0|tx[1],this.C=0|tx[2],this.D=0|tx[3],this.E=0|tx[4],this.F=0|tx[5],this.G=0|tx[6],this.H=0|tx[7]}get(){let{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)tA[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=tA[e-15],r=tA[e-2],n=tr(t,7)^tr(t,18)^t>>>3,i=tr(r,17)^tr(r,19)^r>>>10;tA[e]=i+tA[e-7]+n+tA[e-16]|0}let{A:r,B:n,C:i,D:o,E:s,F:a,G:l,H:u}=this;for(let e=0;e<64;e++){let t=u+(tr(s,6)^tr(s,11)^tr(s,25))+tm(s,a,l)+tv[e]+tA[e]|0,f=(tr(r,2)^tr(r,13)^tr(r,22))+tE(r,n,i)|0;u=l,l=a,a=s,s=o+t|0,o=i,i=n,n=r,r=t+f|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,n,i,o,s,a,l,u)}roundClean(){tA.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class tB extends t_{constructor(){super(),this.A=-0x3efa6128,this.B=0x367cd507,this.C=0x3070dd17,this.D=-0x8f1a6c7,this.E=-4191439,this.F=0x68581511,this.G=0x64f98fa7,this.H=-0x4105b05c,this.outputLen=28}}let tk=tf(()=>new t_);function tC(e){if(!Number.isSafeInteger(e))throw Error(`Wrong integer: ${e}`)}function tI(...e){let t=(e,t)=>r=>e(t(r));return{encode:Array.from(e).reverse().reduce((e,r)=>e?t(e,r.encode):r.encode,void 0),decode:e.reduce((e,r)=>e?t(e,r.decode):r.decode,void 0)}}function tS(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw Error("alphabet.encode input should be an array of numbers");return t.map(t=>{if(tC(t),t<0||t>=e.length)throw Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]})},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw Error("alphabet.decode input should be array of strings");return t.map(t=>{if("string"!=typeof t)throw Error(`alphabet.decode: not string element=${t}`);let r=e.indexOf(t);if(-1===r)throw Error(`Unknown letter: "${t}". Allowed: ${e}`);return r})}}}function tO(e=""){if("string"!=typeof e)throw Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw Error("join.decode input should be string");return t.split(e)}}}function tU(e,t="="){if(tC(e),"string"!=typeof t)throw Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw Error(`padding.encode: non-string input=${e}`);for(;r.length*e%8;)r.push(t);return r},decode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw Error(`padding.decode: non-string input=${e}`);let n=r.length;if(n*e%8)throw Error("Invalid padding: string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if(!((n-1)*e%8))throw Error("Invalid padding: string has too much padding");return r.slice(0,n)}}}function tN(e){if("function"!=typeof e)throw Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function tL(e,t,r){if(t<2)throw Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw Error("convertRadix: data should be array");if(!e.length)return[];let n=0,i=[],o=Array.from(e);for(o.forEach(e=>{if(tC(e),e<0||e>=t)throw Error(`Wrong integer: ${e}`)});;){let e=0,s=!0;for(let i=n;i<o.length;i++){let a=o[i],l=t*e+a;if(!Number.isSafeInteger(l)||t*e/t!==e||l-a!=t*e||(e=l%r,o[i]=Math.floor(l/r),!Number.isSafeInteger(o[i])||o[i]*r+e!==l))throw Error("convertRadix: carry overflow");s&&(o[i]?s=!1:n=i)}if(i.push(e),s)break}for(let t=0;t<e.length-1&&0===e[t];t++)i.push(0);return i.reverse()}tf(()=>new tB);let tR=(e,t)=>t?tR(t,e%t):e,tT=(e,t)=>e+(t-tR(e,t));function t$(e,t,r,n){if(!Array.isArray(e))throw Error("convertRadix2: data should be array");if(t<=0||t>32)throw Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw Error(`convertRadix2: wrong to=${r}`);if(tT(t,r)>32)throw Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${tT(t,r)}`);let i=0,o=0,s=2**r-1,a=[];for(let n of e){if(tC(n),n>=2**t)throw Error(`convertRadix2: invalid data word=${n} from=${t}`);if(i=i<<t|n,o+t>32)throw Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=r;o-=r)a.push((i>>o-r&s)>>>0);i&=2**o-1}if(i=i<<r-o&s,!n&&o>=t)throw Error("Excess padding");if(!n&&i)throw Error(`Non-zero padding: ${i}`);return n&&o>0&&a.push(i>>>0),a}function tF(e){return tC(e),{encode:t=>{if(!(t instanceof Uint8Array))throw Error("radix.encode input should be Uint8Array");return tL(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw Error("radix.decode input should be array of strings");return Uint8Array.from(tL(t,e,256))}}}function tP(e,t=!1){if(tC(e),e<=0||e>32)throw Error("radix2: bits should be in (0..32]");if(tT(8,e)>32||tT(e,8)>32)throw Error("radix2: carry overflow");return{encode:r=>{if(!(r instanceof Uint8Array))throw Error("radix2.encode input should be Uint8Array");return t$(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw Error("radix2.decode input should be array of strings");return Uint8Array.from(t$(r,e,8,t))}}}function tH(e){if("function"!=typeof e)throw Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(e){}}}tI(tP(4),tS("0123456789ABCDEF"),tO("")),tI(tP(5),tS("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),tU(5),tO("")),tI(tP(5),tS("0123456789ABCDEFGHIJKLMNOPQRSTUV"),tU(5),tO("")),tI(tP(5),tS("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),tO(""),tN(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));let tM=tI(tP(6),tS("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),tU(6),tO("")),tq=(tI(tP(6),tS("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),tU(6),tO("")),e=>tI(tF(58),tS(e),tO("")));tq("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),tq("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),tq("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");let tj=tI(tS("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),tO("")),tz=[0x3b6a57b2,0x26508e6d,0x1ea119fa,0x3d4233dd,0x2a1462b3];function tD(e){let t=e>>25,r=(0x1ffffff&e)<<5;for(let e=0;e<tz.length;e++)(t>>e&1)==1&&(r^=tz[e]);return r}function tV(e,t,r=1){let n=e.length,i=1;for(let t=0;t<n;t++){let r=e.charCodeAt(t);if(r<33||r>126)throw Error(`Invalid prefix (${e})`);i=tD(i)^r>>5}i=tD(i);for(let t=0;t<n;t++)i=tD(i)^31&e.charCodeAt(t);for(let e of t)i=tD(i)^e;for(let e=0;e<6;e++)i=tD(i);return i^=r,tj.encode(t$([i%0x40000000],30,5,!1))}function tK(e){let t="bech32"===e?1:0x2bc830a3,r=tP(5),n=r.decode,i=r.encode,o=tH(n);function s(e,r,n=90){if("string"!=typeof e)throw Error(`bech32.encode prefix should be string, not ${typeof e}`);if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw Error(`bech32.encode words should be array of numbers, not ${typeof r}`);let i=e.length+7+r.length;if(!1!==n&&i>n)throw TypeError(`Length ${i} exceeds limit ${n}`);return e=e.toLowerCase(),`${e}1${tj.encode(r)}${tV(e,r,t)}`}function a(e,r=90){if("string"!=typeof e)throw Error(`bech32.decode input should be string, not ${typeof e}`);if(e.length<8||!1!==r&&e.length>r)throw TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${r})`);let n=e.toLowerCase();if(e!==n&&e!==e.toUpperCase())throw Error("String must be lowercase or uppercase");let i=(e=n).lastIndexOf("1");if(0===i||-1===i)throw Error('Letter "1" must be present between prefix and data only');let o=e.slice(0,i),s=e.slice(i+1);if(s.length<6)throw Error("Data must be at least 6 characters long");let l=tj.decode(s).slice(0,-6),u=tV(o,l,t);if(!s.endsWith(u))throw Error(`Invalid checksum in ${e}: expected "${u}"`);return{prefix:o,words:l}}let l=tH(a);function u(e){let{prefix:t,words:r}=a(e,!1);return{prefix:t,words:r,bytes:n(r)}}return{encode:s,decode:a,decodeToBytes:u,decodeUnsafe:l,fromWords:n,fromWordsUnsafe:o,toWords:i}}let tZ=tK("bech32");function tW(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`positive integer expected, not ${e}`)}function tG(e){if("boolean"!=typeof e)throw Error(`boolean expected, not ${e}`)}function tY(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function tJ(e,...t){if(!tY(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function tQ(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function tX(e,t){tJ(e);let r=t.outputLen;if(e.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}tK("bech32m"),tI(tP(4),tS("0123456789abcdef"),tO(""),tN(e=>{if("string"!=typeof e||e.length%2)throw TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));let t0=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),t1=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(68!==new Uint8Array(new Uint32Array([0x11223344]).buffer)[0])throw Error("Non little-endian hardware is not supported");(e,t)=>t.toString(16).padStart(2,"0");let t2={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function t3(e){if("string"!=typeof e)throw Error(`string expected, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function t8(e){if("string"==typeof e)e=t3(e);else if(tY(e))e=e.slice();else throw Error(`Uint8Array expected, got ${typeof e}`);return e}function t6(e,t){if(null==t||"object"!=typeof t)throw Error("options must be defined");return Object.assign(e,t)}function t5(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}let t4=(e,t)=>(Object.assign(t,e),t);function t9(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(0xffffffff),s=Number(r>>i&o),a=Number(r&o),l=n?4:0,u=n?0:4;e.setUint32(t+l,s,n),e.setUint32(t+u,a,n)}let t7=16,re=new Uint8Array(16),rt=t0(re),rr=225,rn=(e,t,r,n)=>{let i=1&n;return{s3:r<<31|n>>>1,s2:t<<31|r>>>1,s1:e<<31|t>>>1,s0:e>>>1^rr<<24&-(1&i)}},ri=e=>(e>>>0&255)<<24|(e>>>8&255)<<16|(e>>>16&255)<<8|e>>>24&255|0;function ro(e){e.reverse();let t=1&e[15],r=0;for(let t=0;t<e.length;t++){let n=e[t];e[t]=n>>>1|r,r=(1&n)<<7}return e[0]^=225&-t,e}let rs=e=>e>65536?8:e>1024?4:2;class ra{constructor(e,t){this.blockLen=t7,this.outputLen=t7,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,tJ(e=t8(e),16);let r=t1(e),n=r.getUint32(0,!1),i=r.getUint32(4,!1),o=r.getUint32(8,!1),s=r.getUint32(12,!1),a=[];for(let e=0;e<128;e++)a.push({s0:ri(n),s1:ri(i),s2:ri(o),s3:ri(s)}),{s0:n,s1:i,s2:o,s3:s}=rn(n,i,o,s);let l=rs(t||1024);if(![1,2,4,8].includes(l))throw Error(`ghash: wrong window size=${l}, should be 2, 4 or 8`);this.W=l;let u=128/l,f=this.windowSize=2**l,c=[];for(let e=0;e<u;e++)for(let t=0;t<f;t++){let r=0,n=0,i=0,o=0;for(let s=0;s<l;s++){if(!(t>>>l-s-1&1))continue;let{s0:u,s1:f,s2:c,s3:h}=a[l*e+s];r^=u,n^=f,i^=c,o^=h}c.push({s0:r,s1:n,s2:i,s3:o})}this.t=c}_updateBlock(e,t,r,n){e^=this.s0,t^=this.s1,r^=this.s2,n^=this.s3;let{W:i,t:o,windowSize:s}=this,a=0,l=0,u=0,f=0,c=(1<<i)-1,h=0;for(let d of[e,t,r,n])for(let e=0;e<4;e++){let t=d>>>8*e&255;for(let e=8/i-1;e>=0;e--){let{s0:r,s1:n,s2:d,s3:p}=o[h*s+(t>>>i*e&c)];a^=r,l^=n,u^=d,f^=p,h+=1}}this.s0=a,this.s1=l,this.s2=u,this.s3=f}update(e){e=t8(e),tQ(this);let t=t0(e),r=Math.floor(e.length/t7),n=e.length%t7;for(let e=0;e<r;e++)this._updateBlock(t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]);return n&&(re.set(e.subarray(r*t7)),this._updateBlock(rt[0],rt[1],rt[2],rt[3]),rt.fill(0)),this}destroy(){let{t:e}=this;for(let t of e)t.s0=0,t.s1=0,t.s2=0,t.s3=0}digestInto(e){tQ(this),tX(e,this),this.finished=!0;let{s0:t,s1:r,s2:n,s3:i}=this,o=t0(e);return o[0]=t,o[1]=r,o[2]=n,o[3]=i,e}digest(){let e=new Uint8Array(t7);return this.digestInto(e),this.destroy(),e}}class rl extends ra{constructor(e,t){let r=ro((e=t8(e)).slice());super(r,t),r.fill(0)}update(e){e=t8(e),tQ(this);let t=t0(e),r=e.length%t7,n=Math.floor(e.length/t7);for(let e=0;e<n;e++)this._updateBlock(ri(t[4*e+3]),ri(t[4*e+2]),ri(t[4*e+1]),ri(t[4*e+0]));return r&&(re.set(e.subarray(n*t7)),this._updateBlock(ri(rt[3]),ri(rt[2]),ri(rt[1]),ri(rt[0])),rt.fill(0)),this}digestInto(e){tQ(this),tX(e,this),this.finished=!0;let{s0:t,s1:r,s2:n,s3:i}=this,o=t0(e);return o[0]=t,o[1]=r,o[2]=n,o[3]=i,e.reverse()}}function ru(e){let t=(t,r)=>e(r,t.length).update(t8(t)).digest(),r=e(new Uint8Array(16),0);return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=(t,r)=>e(t,r),t}ru((e,t)=>new ra(e,t)),ru((e,t)=>new rl(e,t));let rf=16;new Uint8Array(16);let rc=283;function rh(e){return e<<1^rc&-(e>>7)}function rd(e,t){let r=0;for(;t>0;t>>=1)r^=e&-(1&t),e=rh(e);return r}let rp=(()=>{let e=new Uint8Array(256);for(let t=0,r=1;t<256;t++,r^=rh(r))e[t]=r;let t=new Uint8Array(256);t[0]=99;for(let r=0;r<255;r++){let n=e[255-r];n|=n<<8,t[e[r]]=(n^n>>4^n>>5^n>>6^n>>7^99)&255}return t})(),rg=rp.map((e,t)=>rp.indexOf(t)),ry=e=>e<<24|e>>>8,rb=e=>e<<8|e>>>24;function rw(e,t){if(256!==e.length)throw Error("Wrong sbox length");let r=new Uint32Array(256).map((r,n)=>t(e[n])),n=r.map(rb),i=n.map(rb),o=i.map(rb),s=new Uint32Array(65536),a=new Uint32Array(65536),l=new Uint16Array(65536);for(let t=0;t<256;t++)for(let u=0;u<256;u++){let f=256*t+u;s[f]=r[t]^n[u],a[f]=i[t]^o[u],l[f]=e[t]<<8|e[u]}return{sbox:e,sbox2:l,T0:r,T1:n,T2:i,T3:o,T01:s,T23:a}}let rm=rw(rp,e=>rd(e,3)<<24|e<<16|e<<8|rd(e,2)),rE=rw(rg,e=>rd(e,11)<<24|rd(e,13)<<16|rd(e,9)<<8|rd(e,14)),rv=(()=>{let e=new Uint8Array(16);for(let t=0,r=1;t<16;t++,r=rh(r))e[t]=r;return e})();function rx(e){tJ(e);let t=e.length;if(![16,24,32].includes(t))throw Error(`aes: wrong key size: should be 16, 24 or 32, got: ${t}`);let{sbox2:r}=rm,n=t0(e),i=n.length,o=e=>rB(r,e,e,e,e),s=new Uint32Array(t+28);s.set(n);for(let e=i;e<s.length;e++){let t=s[e-1];e%i==0?t=o(ry(t))^rv[e/i-1]:i>6&&e%i==4&&(t=o(t)),s[e]=s[e-i]^t}return s}function rA(e){let t=rx(e),r=t.slice(),n=t.length,{sbox2:i}=rm,{T0:o,T1:s,T2:a,T3:l}=rE;for(let e=0;e<n;e+=4)for(let i=0;i<4;i++)r[e+i]=t[n-e-4+i];t.fill(0);for(let e=4;e<n-4;e++){let t=r[e],n=rB(i,t,t,t,t);r[e]=o[255&n]^s[n>>>8&255]^a[n>>>16&255]^l[n>>>24]}return r}function r_(e,t,r,n,i,o){return e[r<<8&65280|n>>>8&255]^t[i>>>8&65280|o>>>24&255]}function rB(e,t,r,n,i){return e[255&t|65280&r]|e[n>>>16&255|i>>>16&65280]<<16}function rk(e,t,r,n,i){let{sbox2:o,T01:s,T23:a}=rm,l=0;t^=e[l++],r^=e[l++],n^=e[l++],i^=e[l++];let u=e.length/4-2;for(let o=0;o<u;o++){let o=e[l++]^r_(s,a,t,r,n,i),u=e[l++]^r_(s,a,r,n,i,t),f=e[l++]^r_(s,a,n,i,t,r),c=e[l++]^r_(s,a,i,t,r,n);t=o,r=u,n=f,i=c}let f=e[l++]^rB(o,t,r,n,i);return{s0:f,s1:e[l++]^rB(o,r,n,i,t),s2:e[l++]^rB(o,n,i,t,r),s3:e[l++]^rB(o,i,t,r,n)}}function rC(e,t,r,n,i){let{sbox2:o,T01:s,T23:a}=rE,l=0;t^=e[l++],r^=e[l++],n^=e[l++],i^=e[l++];let u=e.length/4-2;for(let o=0;o<u;o++){let o=e[l++]^r_(s,a,t,i,n,r),u=e[l++]^r_(s,a,r,t,i,n),f=e[l++]^r_(s,a,n,r,t,i),c=e[l++]^r_(s,a,i,n,r,t);t=o,r=u,n=f,i=c}let f=e[l++]^rB(o,t,i,n,r);return{s0:f,s1:e[l++]^rB(o,r,t,i,n),s2:e[l++]^rB(o,n,r,t,i),s3:e[l++]^rB(o,i,n,r,t)}}function rI(e,t){if(!t)return new Uint8Array(e);if(tJ(t),t.length<e)throw Error(`aes: wrong destination length, expected at least ${e}, got: ${t.length}`);return t}function rS(e){if(tJ(e),e.length%rf!=0)throw Error(`aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size ${rf}`)}function rO(e,t,r){let n=e.length,i=n%rf;if(!t&&0!==i)throw Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");let o=t0(e);if(t){let e=rf-i;e||(e=rf),n+=e}let s=rI(n,r);return{b:o,o:t0(s),out:s}}function rU(e,t){if(!t)return e;let r=e.length;if(!r)throw Error("aes/pcks5: empty ciphertext not allowed");let n=e[r-1];if(n<=0||n>16)throw Error(`aes/pcks5: wrong padding byte: ${n}`);let i=e.subarray(0,-n);for(let t=0;t<n;t++)if(e[r-t-1]!==n)throw Error("aes/pcks5: wrong padding");return i}function rN(e){let t=new Uint8Array(16),r=t0(t);t.set(e);let n=rf-e.length;for(let e=rf-n;e<rf;e++)t[e]=n;return r}let rL=t4({blockSize:16,nonceLength:16},function(e,t,r={}){tJ(e),tJ(t,16);let n=!r.disablePadding;return{encrypt:(r,i)=>{let o=rx(e),{b:s,o:a,out:l}=rO(r,n,i),u=t0(t),f=u[0],c=u[1],h=u[2],d=u[3],p=0;for(;p+4<=s.length;)f^=s[p+0],c^=s[p+1],h^=s[p+2],d^=s[p+3],({s0:f,s1:c,s2:h,s3:d}=rk(o,f,c,h,d)),a[p++]=f,a[p++]=c,a[p++]=h,a[p++]=d;if(n){let e=rN(r.subarray(4*p));f^=e[0],c^=e[1],h^=e[2],d^=e[3],({s0:f,s1:c,s2:h,s3:d}=rk(o,f,c,h,d)),a[p++]=f,a[p++]=c,a[p++]=h,a[p++]=d}return o.fill(0),l},decrypt:(r,i)=>{rS(r);let o=rA(e),s=t0(t),a=rI(r.length,i),l=t0(r),u=t0(a),f=s[0],c=s[1],h=s[2],d=s[3];for(let e=0;e+4<=l.length;){let t=f,r=c,n=h,i=d;f=l[e+0];let{s0:s,s1:a,s2:p,s3:g}=rC(o,f,c=l[e+1],h=l[e+2],d=l[e+3]);u[e++]=s^t,u[e++]=a^r,u[e++]=p^n,u[e++]=g^i}return o.fill(0),rU(a,n)}}}),rR=(e,t)=>255&e[t++]|(255&e[t++])<<8;class rT{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,tJ(e=t8(e),32);let t=rR(e,0),r=rR(e,2),n=rR(e,4),i=rR(e,6),o=rR(e,8),s=rR(e,10),a=rR(e,12),l=rR(e,14);this.r[0]=8191&t,this.r[1]=(t>>>13|r<<3)&8191,this.r[2]=(r>>>10|n<<6)&7939,this.r[3]=(n>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|s<<2)&8191,this.r[7]=(s>>>11|a<<5)&8065,this.r[8]=(a>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let t=0;t<8;t++)this.pad[t]=rR(e,16+2*t)}process(e,t,r=!1){let n=r?0:2048,{h:i,r:o}=this,s=o[0],a=o[1],l=o[2],u=o[3],f=o[4],c=o[5],h=o[6],d=o[7],p=o[8],g=o[9],y=rR(e,t+0),b=rR(e,t+2),w=rR(e,t+4),m=rR(e,t+6),E=rR(e,t+8),v=rR(e,t+10),x=rR(e,t+12),A=rR(e,t+14),_=i[0]+(8191&y),B=i[1]+((y>>>13|b<<3)&8191),k=i[2]+((b>>>10|w<<6)&8191),C=i[3]+((w>>>7|m<<9)&8191),I=i[4]+((m>>>4|E<<12)&8191),S=i[5]+(E>>>1&8191),O=i[6]+((E>>>14|v<<2)&8191),U=i[7]+((v>>>11|x<<5)&8191),N=i[8]+((x>>>8|A<<8)&8191),L=i[9]+(A>>>5|n),R=0,T=0+_*s+5*g*B+5*p*k+5*d*C+5*h*I;R=T>>>13,T&=8191,T+=5*c*S+5*f*O+5*u*U+5*l*N+5*a*L,R+=T>>>13,T&=8191;let $=R+_*a+B*s+5*g*k+5*p*C+5*d*I;R=$>>>13,$&=8191,$+=5*h*S+5*c*O+5*f*U+5*u*N+5*l*L,R+=$>>>13,$&=8191;let F=R+_*l+B*a+k*s+5*g*C+5*p*I;R=F>>>13,F&=8191,F+=5*d*S+5*h*O+5*c*U+5*f*N+5*u*L,R+=F>>>13,F&=8191;let P=R+_*u+B*l+k*a+C*s+5*g*I;R=P>>>13,P&=8191,P+=5*p*S+5*d*O+5*h*U+5*c*N+5*f*L,R+=P>>>13,P&=8191;let H=R+_*f+B*u+k*l+C*a+I*s;R=H>>>13,H&=8191,H+=5*g*S+5*p*O+5*d*U+5*h*N+5*c*L,R+=H>>>13,H&=8191;let M=R+_*c+B*f+k*u+C*l+I*a;R=M>>>13,M&=8191,M+=S*s+5*g*O+5*p*U+5*d*N+5*h*L,R+=M>>>13,M&=8191;let q=R+_*h+B*c+k*f+C*u+I*l;R=q>>>13,q&=8191,q+=S*a+O*s+5*g*U+5*p*N+5*d*L,R+=q>>>13,q&=8191;let j=R+_*d+B*h+k*c+C*f+I*u;R=j>>>13,j&=8191,j+=S*l+O*a+U*s+5*g*N+5*p*L,R+=j>>>13,j&=8191;let z=R+_*p+B*d+k*h+C*c+I*f;R=z>>>13,z&=8191,z+=S*u+O*l+U*a+N*s+5*g*L,R+=z>>>13,z&=8191;let D=R+_*g+B*p+k*d+C*h+I*c;R=D>>>13,D&=8191,D+=S*f+O*u+U*l+N*a+L*s,R+=D>>>13,D&=8191,T=8191&(R=(R=(R<<2)+R|0)+T|0),R>>>=13,$+=R,i[0]=T,i[1]=$,i[2]=F,i[3]=P,i[4]=H,i[5]=M,i[6]=q,i[7]=j,i[8]=z,i[9]=D}finalize(){let{h:e,pad:t}=this,r=new Uint16Array(10),n=e[1]>>>13;e[1]&=8191;for(let t=2;t<10;t++)e[t]+=n,n=e[t]>>>13,e[t]&=8191;e[0]+=5*n,n=e[0]>>>13,e[0]&=8191,e[1]+=n,n=e[1]>>>13,e[1]&=8191,e[2]+=n,r[0]=e[0]+5,n=r[0]>>>13,r[0]&=8191;for(let t=1;t<10;t++)r[t]=e[t]+n,n=r[t]>>>13,r[t]&=8191;r[9]-=8192;let i=(1^n)-1;for(let e=0;e<10;e++)r[e]&=i;i=~i;for(let t=0;t<10;t++)e[t]=e[t]&i|r[t];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+t[0];e[0]=65535&o;for(let r=1;r<8;r++)o=(e[r]+t[r]|0)+(o>>>16)|0,e[r]=65535&o}update(e){tQ(this);let{buffer:t,blockLen:r}=this,n=(e=t8(e)).length;for(let i=0;i<n;){let o=Math.min(r-this.pos,n-i);if(o===r){for(;r<=n-i;i+=r)this.process(e,i);continue}t.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){tQ(this),tX(e,this),this.finished=!0;let{buffer:t,h:r}=this,{pos:n}=this;if(n){for(t[n++]=1;n<16;n++)t[n]=0;this.process(t,0,!0)}this.finalize();let i=0;for(let t=0;t<8;t++)e[i++]=r[t]>>>0,e[i++]=r[t]>>>8;return e}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}}let r$=function(e){let t=(t,r)=>e(r).update(t8(t)).digest(),r=e(new Uint8Array(32));return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}(e=>new rT(e)),rF=e=>Uint8Array.from(e.split("").map(e=>e.charCodeAt(0))),rP=rF("expand 16-byte k"),rH=rF("expand 32-byte k"),rM=t0(rP),rq=t0(rH);function rj(e,t){return e<<t|e>>>32-t}function rz(e){return e.byteOffset%4==0}rq.slice();let rD=64,rV=16,rK=0x100000000-1,rZ=new Uint32Array;function rW(e,t,r,n,i,o,s,a){let l=i.length,u=new Uint8Array(rD),f=t0(u),c=rz(i)&&rz(o),h=c?t0(i):rZ,d=c?t0(o):rZ;for(let p=0;p<l;s++){if(e(t,r,n,f,s,a),s>=rK)throw Error("arx: counter overflow");let g=Math.min(rD,l-p);if(c&&g===rD){let e=p/4;if(p%4!=0)throw Error("arx: invalid block position");for(let t=0,r;t<rV;t++)d[r=e+t]=h[r]^f[t];p+=rD;continue}for(let e=0,t;e<g;e++)o[t=p+e]=i[t]^u[e];p+=g}}function rG(e,t){let{allowShortKeys:r,extendNonceFn:n,counterLength:i,counterRight:o,rounds:s}=t6({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if("function"!=typeof e)throw Error("core must be a function");return tW(i),tW(s),tG(o),tG(r),(t,a,l,u,f=0)=>{tJ(t),tJ(a),tJ(l);let c=l.length;if(u||(u=new Uint8Array(c)),tJ(u),tW(f),f<0||f>=rK)throw Error("arx: counter overflow");if(u.length<c)throw Error(`arx: output (${u.length}) is shorter than data (${c})`);let h=[],d=t.length,p,g;if(32===d)p=t.slice(),h.push(p),g=rq;else if(16===d&&r)(p=new Uint8Array(32)).set(t),p.set(t,16),g=rM,h.push(p);else throw Error(`arx: invalid 32-byte key, got length=${d}`);rz(a)||(a=a.slice(),h.push(a));let y=t0(p);if(n){if(24!==a.length)throw Error("arx: extended nonce must be 24 bytes");n(g,y,t0(a.subarray(0,16)),y),a=a.subarray(16)}let b=16-i;if(b!==a.length)throw Error(`arx: nonce must be ${b} or 16 bytes`);if(12!==b){let e=new Uint8Array(12);e.set(a,o?0:12-a.length),a=e,h.push(a)}for(rW(e,g,y,t0(a),l,u,f,s);h.length>0;)h.pop().fill(0);return u}}function rY(e,t,r,n,i,o=20){let s=e[0],a=e[1],l=e[2],u=e[3],f=t[0],c=t[1],h=t[2],d=t[3],p=t[4],g=t[5],y=t[6],b=t[7],w=i,m=r[0],E=r[1],v=r[2],x=s,A=a,_=l,B=u,k=f,C=c,I=h,S=d,O=p,U=g,N=y,L=b,R=w,T=m,$=E,F=v;for(let e=0;e<o;e+=2)O=O+(R=rj(R^(x=x+k|0),16))|0,x=x+(k=rj(k^O,12))|0,O=O+(R=rj(R^x,8))|0,k=rj(k^O,7),U=U+(T=rj(T^(A=A+C|0),16))|0,A=A+(C=rj(C^U,12))|0,U=U+(T=rj(T^A,8))|0,C=rj(C^U,7),N=N+($=rj($^(_=_+I|0),16))|0,_=_+(I=rj(I^N,12))|0,N=N+($=rj($^_,8))|0,I=rj(I^N,7),L=L+(F=rj(F^(B=B+S|0),16))|0,B=B+(S=rj(S^L,12))|0,L=L+(F=rj(F^B,8))|0,S=rj(S^L,7),N=N+(F=rj(F^(x=x+C|0),16))|0,x=x+(C=rj(C^N,12))|0,N=N+(F=rj(F^x,8))|0,C=rj(C^N,7),L=L+(R=rj(R^(A=A+I|0),16))|0,A=A+(I=rj(I^L,12))|0,L=L+(R=rj(R^A,8))|0,I=rj(I^L,7),O=O+(T=rj(T^(_=_+S|0),16))|0,_=_+(S=rj(S^O,12))|0,O=O+(T=rj(T^_,8))|0,S=rj(S^O,7),U=U+($=rj($^(B=B+k|0),16))|0,B=B+(k=rj(k^U,12))|0,U=U+($=rj($^B,8))|0,k=rj(k^U,7);let P=0;n[P++]=s+x|0,n[P++]=a+A|0,n[P++]=l+_|0,n[P++]=u+B|0,n[P++]=f+k|0,n[P++]=c+C|0,n[P++]=h+I|0,n[P++]=d+S|0,n[P++]=p+O|0,n[P++]=g+U|0,n[P++]=y+N|0,n[P++]=b+L|0,n[P++]=w+R|0,n[P++]=m+T|0,n[P++]=E+$|0,n[P++]=v+F|0}function rJ(e,t,r,n){let i=e[0],o=e[1],s=e[2],a=e[3],l=t[0],u=t[1],f=t[2],c=t[3],h=t[4],d=t[5],p=t[6],g=t[7],y=r[0],b=r[1],w=r[2],m=r[3];for(let e=0;e<20;e+=2)h=h+(y=rj(y^(i=i+l|0),16))|0,i=i+(l=rj(l^h,12))|0,h=h+(y=rj(y^i,8))|0,l=rj(l^h,7),d=d+(b=rj(b^(o=o+u|0),16))|0,o=o+(u=rj(u^d,12))|0,d=d+(b=rj(b^o,8))|0,u=rj(u^d,7),p=p+(w=rj(w^(s=s+f|0),16))|0,s=s+(f=rj(f^p,12))|0,p=p+(w=rj(w^s,8))|0,f=rj(f^p,7),g=g+(m=rj(m^(a=a+c|0),16))|0,a=a+(c=rj(c^g,12))|0,g=g+(m=rj(m^a,8))|0,c=rj(c^g,7),p=p+(m=rj(m^(i=i+u|0),16))|0,i=i+(u=rj(u^p,12))|0,p=p+(m=rj(m^i,8))|0,u=rj(u^p,7),g=g+(y=rj(y^(o=o+f|0),16))|0,o=o+(f=rj(f^g,12))|0,g=g+(y=rj(y^o,8))|0,f=rj(f^g,7),h=h+(b=rj(b^(s=s+c|0),16))|0,s=s+(c=rj(c^h,12))|0,h=h+(b=rj(b^s,8))|0,c=rj(c^h,7),d=d+(w=rj(w^(a=a+l|0),16))|0,a=a+(l=rj(l^d,12))|0,d=d+(w=rj(w^a,8))|0,l=rj(l^d,7);let E=0;n[E++]=i,n[E++]=o,n[E++]=s,n[E++]=a,n[E++]=y,n[E++]=b,n[E++]=w,n[E++]=m}let rQ=rG(rY,{counterRight:!1,counterLength:4,allowShortKeys:!1}),rX=rG(rY,{counterRight:!1,counterLength:8,extendNonceFn:rJ,allowShortKeys:!1}),r0=new Uint8Array(16),r1=(e,t)=>{e.update(t);let r=t.length%16;r&&e.update(r0.subarray(r))},r2=new Uint8Array(32);function r3(e,t,r,n,i){let o=e(t,r,r2),s=r$.create(o);i&&r1(s,i),r1(s,n);let a=new Uint8Array(16),l=t1(a);t9(l,0,BigInt(i?i.length:0),!0),t9(l,8,BigInt(n.length),!0),s.update(a);let u=s.digest();return o.fill(0),u}let r8=e=>(t,r,n)=>{let i=16;return tJ(t,32),tJ(r),{encrypt:(o,s)=>{let a=o.length,l=a+i;s?tJ(s,l):s=new Uint8Array(l),e(t,r,o,s,1);let u=r3(e,t,r,s.subarray(0,-i),n);return s.set(u,a),s},decrypt:(o,s)=>{let a=o.length,l=a-i;if(a<i)throw Error(`encrypted data must be at least ${i} bytes`);s?tJ(s,l):s=new Uint8Array(l);let u=o.subarray(0,-i);if(!t5(o.subarray(-i),r3(e,t,r,u,n)))throw Error("invalid tag");return e(t,r,u,s,1),s}}};r8(rQ),r8(rX);class r6 extends tu{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,ty.hash(e);let r=ta(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return ty.exists(this),this.iHash.update(e),this}digestInto(e){ty.exists(this),ty.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let r5=(e,t,r)=>new r6(e,t).update(r).digest();function r4(e,t,r){return ty.hash(e),void 0===r&&(r=new Uint8Array(e.outputLen)),r5(e,ta(r),ta(t))}r5.create=(e,t)=>new r6(e,t);let r9=new Uint8Array([0]),r7=new Uint8Array;function ne(e,t,r,n=32){if(ty.hash(e),ty.number(n),n>255*e.outputLen)throw Error("Length should be <= 255*HashLen");let i=Math.ceil(n/e.outputLen);void 0===r&&(r=r7);let o=new Uint8Array(i*e.outputLen),s=r5.create(e,t),a=s._cloneInto(),l=new Uint8Array(s.outputLen);for(let t=0;t<i;t++)r9[0]=t+1,a.update(0===t?r7:l).update(r).update(r9).digestInto(l),o.set(l,e.outputLen*t),s._cloneInto(a);return s.destroy(),a.destroy(),l.fill(0),r9.fill(0),o.slice(0,n)}var nt=Object.defineProperty,nr=(e,t)=>{for(var r in t)nt(e,r,{get:t[r],enumerable:!0})},nn=Symbol("verified"),ni=e=>e instanceof Object;function no(e){if(!ni(e)||"number"!=typeof e.kind||"string"!=typeof e.content||"number"!=typeof e.created_at||"string"!=typeof e.pubkey||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let r=e.tags[t];if(!Array.isArray(r))return!1;for(let e=0;e<r.length;e++)if("object"==typeof r[e])return!1}return!0}nr({},{Queue:()=>nd,QueueNode:()=>nh,binarySearch:()=>nc,insertEventIntoAscendingList:()=>nf,insertEventIntoDescendingList:()=>nu,normalizeURL:()=>nl,utf8Decoder:()=>ns,utf8Encoder:()=>na});var ns=new TextDecoder("utf-8"),na=new TextEncoder;function nl(e){-1===e.indexOf("://")&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),("80"===t.port&&"ws:"===t.protocol||"443"===t.port&&"wss:"===t.protocol)&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}function nu(e,t){let[r,n]=nc(e,e=>t.id===e.id?0:t.created_at===e.created_at?-1:e.created_at-t.created_at);return n||e.splice(r,0,t),e}function nf(e,t){let[r,n]=nc(e,e=>t.id===e.id?0:t.created_at===e.created_at?-1:t.created_at-e.created_at);return n||e.splice(r,0,t),e}function nc(e,t){let r=0,n=e.length-1;for(;r<=n;){let i=Math.floor((r+n)/2),o=t(e[i]);if(0===o)return[i,!0];o<0?n=i-1:r=i+1}return[r,!1]}var nh=class{value;next=null;prev=null;constructor(e){this.value=e}},nd=class{first;last;constructor(){this.first=null,this.last=null}enqueue(e){let t=new nh(e);return this.last?this.last===this.first?(this.last=t,this.last.prev=this.first,this.first.next=t):(t.prev=this.last,this.last.next=t,this.last=t):(this.first=t,this.last=t),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){let e=this.first;return this.first=null,this.last=null,e.value}let e=this.first;return this.first=e.next,e.value}};function np(e){if(!no(e))throw Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function ng(e){return ti(tk(na.encode(np(e))))}var ny=new class{generateSecretKey(){return e9.utils.randomPrivateKey()}getPublicKey(e){return ti(e9.getPublicKey(e))}finalizeEvent(e,t){let r=e;return r.pubkey=ti(e9.getPublicKey(t)),r.id=ng(r),r.sig=ti(e9.sign(ng(r),t)),r[nn]=!0,r}verifyEvent(e){if("boolean"==typeof e[nn])return e[nn];let t=ng(e);if(t!==e.id)return e[nn]=!1,!1;try{let r=e9.verify(e.sig,t,e.pubkey);return e[nn]=r,r}catch(t){return e[nn]=!1,!1}}},nb=ny.generateSecretKey,nw=ny.getPublicKey,nm=ny.finalizeEvent,nE=ny.verifyEvent;function nv(e){return 1e3<=e&&e<1e4||[1,2,4,5,6,7,8,16,40,41,42,43,44].includes(e)}function nx(e){return[0,3].includes(e)||1e4<=e&&e<2e4}function nA(e){return 2e4<=e&&e<3e4}function n_(e){return 3e4<=e&&e<4e4}function nB(e){return nv(e)?"regular":nx(e)?"replaceable":nA(e)?"ephemeral":n_(e)?"parameterized":"unknown"}function nk(e,t){let r=t instanceof Array?t:[t];return no(e)&&r.includes(e.kind)||!1}nr({},{Application:()=>iO,BadgeAward:()=>nT,BadgeDefinition:()=>iA,BlockedRelaysList:()=>ir,BookmarkList:()=>n7,Bookmarksets:()=>iE,Calendar:()=>iF,CalendarEventRSVP:()=>iP,ChannelCreation:()=>nH,ChannelHideMessage:()=>nj,ChannelMessage:()=>nq,ChannelMetadata:()=>nM,ChannelMuteUser:()=>nz,ClassifiedListing:()=>iL,ClientAuth:()=>ih,CommunitiesList:()=>ie,CommunityDefinition:()=>iq,CommunityPostApproval:()=>nQ,Contacts:()=>nO,CreateOrUpdateProduct:()=>ik,CreateOrUpdateStall:()=>iB,Curationsets:()=>iv,Date:()=>iT,DirectMessageRelaysList:()=>ia,DraftClassifiedListing:()=>iR,DraftLong:()=>iI,Emojisets:()=>iS,EncryptedDirectMessage:()=>nU,EventDeletion:()=>nN,FileMetadata:()=>nK,FileServerPreference:()=>il,Followsets:()=>ib,GenericRepost:()=>nP,Genericlists:()=>iw,GiftWrap:()=>nV,HTTPAuth:()=>iy,Handlerinformation:()=>iM,Handlerrecommendation:()=>iH,Highlights:()=>n6,InterestsList:()=>io,Interestsets:()=>i_,JobFeedback:()=>n1,JobRequest:()=>nX,JobResult:()=>n0,Label:()=>nJ,LightningPubRPC:()=>ic,LiveChatMessage:()=>nZ,LiveEvent:()=>iU,LongFormArticle:()=>iC,Metadata:()=>nC,Mutelist:()=>n5,NWCWalletInfo:()=>iu,NWCWalletRequest:()=>id,NWCWalletResponse:()=>ip,NostrConnect:()=>ig,OpenTimestamps:()=>nD,Pinlist:()=>n4,PrivateDirectMessage:()=>nF,ProblemTracker:()=>nW,ProfileBadges:()=>ix,PublicChatsList:()=>it,Reaction:()=>nR,RecommendRelay:()=>nS,RelayList:()=>n9,Relaysets:()=>im,Report:()=>nG,Reporting:()=>nY,Repost:()=>nL,Seal:()=>n$,SearchRelaysList:()=>ii,ShortTextNote:()=>nI,Time:()=>i$,UserEmojiList:()=>is,UserStatuses:()=>iN,Zap:()=>n8,ZapGoal:()=>n2,ZapRequest:()=>n3,classifyKind:()=>nB,isEphemeralKind:()=>nA,isKind:()=>nk,isParameterizedReplaceableKind:()=>n_,isRegularKind:()=>nv,isReplaceableKind:()=>nx});var nC=0,nI=1,nS=2,nO=3,nU=4,nN=5,nL=6,nR=7,nT=8,n$=13,nF=14,nP=16,nH=40,nM=41,nq=42,nj=43,nz=44,nD=1040,nV=1059,nK=1063,nZ=1311,nW=1971,nG=1984,nY=1984,nJ=1985,nQ=4550,nX=5999,n0=6999,n1=7e3,n2=9041,n3=9734,n8=9735,n6=9802,n5=1e4,n4=10001,n9=10002,n7=10003,ie=10004,it=10005,ir=10006,ii=10007,io=10015,is=10030,ia=10050,il=10096,iu=13194,ic=21e3,ih=22242,id=23194,ip=23195,ig=24133,iy=27235,ib=3e4,iw=30001,im=30002,iE=30003,iv=30004,ix=30008,iA=30009,i_=30015,iB=30017,ik=30018,iC=30023,iI=30024,iS=30030,iO=30078,iU=30311,iN=30315,iL=30402,iR=30403,iT=31922,i$=31923,iF=31924,iP=31925,iH=31989,iM=31990,iq=34550;function ij(e,t){if(e.ids&&-1===e.ids.indexOf(t.id)||e.kinds&&-1===e.kinds.indexOf(t.kind)||e.authors&&-1===e.authors.indexOf(t.pubkey))return!1;for(let r in e)if("#"===r[0]){let n=r.slice(1),i=e[`#${n}`];if(i&&!t.tags.find(([e,t])=>e===r.slice(1)&&-1!==i.indexOf(t)))return!1}return(!e.since||!(t.created_at<e.since))&&(!e.until||!(t.created_at>e.until))}function iz(e,t){for(let r=0;r<e.length;r++)if(ij(e[r],t))return!0;return!1}function iD(e,t){let r=t.length+3,n=e.indexOf(`"${t}":`)+r,i=e.slice(n).indexOf('"')+n+1;return e.slice(i,i+64)}function iV(e,t){let r=t.length,n=e.indexOf(`"${t}":`)+r+3,i=e.slice(n),o=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,o),10)}function iK(e){let t=e.slice(0,22).indexOf('"EVENT"');if(-1===t)return null;let r=e.slice(t+7+1).indexOf('"');if(-1===r)return null;let n=t+7+1+r,i=e.slice(n+1,80).indexOf('"');if(-1===i)return null;let o=n+1+i;return e.slice(n+1,o)}function iZ(e,t){return t===iD(e,"id")}function iW(e,t){return t===iD(e,"pubkey")}function iG(e,t){return t===iV(e,"kind")}function iY(e,t){return{kind:ih,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}async function iJ(){return new Promise(e=>{let t=new MessageChannel,r=()=>{t.port1.removeEventListener("message",r),e()};t.port1.addEventListener("message",r),t.port2.postMessage(0),t.port1.start()})}nr({},{getHex64:()=>iD,getInt:()=>iV,getSubscriptionId:()=>iK,matchEventId:()=>iZ,matchEventKind:()=>iG,matchEventPubkey:()=>iW}),nr({},{makeAuthEvent:()=>iY});var iQ=class{url;_connected=!1;onclose=null;onnotice=e=>console.debug(`NOTICE from ${this.url}: ${e}`);_onauth=null;baseEoseTimeout=4400;connectionTimeout=4400;publishTimeout=4400;openSubs=new Map;connectionTimeoutHandle;connectionPromise;openCountRequests=new Map;openEventPublishes=new Map;ws;incomingMessageQueue=new nd;queueRunning=!1;challenge;serial=0;verifyEvent;_WebSocket;constructor(e,t){this.url=nl(e),this.verifyEvent=t.verifyEvent,this._WebSocket=t.websocketImplementation||WebSocket}static async connect(e,t){let r=new iQ(e,t);return await r.connect(),r}closeAllSubscriptions(e){for(let[t,r]of this.openSubs)r.close(e);for(let[t,r]of(this.openSubs.clear(),this.openEventPublishes))r.reject(Error(e));for(let[t,r]of(this.openEventPublishes.clear(),this.openCountRequests))r.reject(Error(e));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise||(this.challenge=void 0,this.connectionPromise=new Promise((e,t)=>{this.connectionTimeoutHandle=setTimeout(()=>{t("connection timed out"),this.connectionPromise=void 0,this.onclose?.(),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new this._WebSocket(this.url)}catch(e){t(e);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,e()},this.ws.onerror=e=>{t(e.message||"websocket error"),this._connected&&(this._connected=!1,this.connectionPromise=void 0,this.onclose?.(),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{this._connected&&(this._connected=!1,this.connectionPromise=void 0,this.onclose?.(),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)})),this.connectionPromise}async runQueue(){for(this.queueRunning=!0;!1!==this.handleNext();)await iJ();this.queueRunning=!1}handleNext(){let e=this.incomingMessageQueue.dequeue();if(!e)return!1;let t=iK(e);if(t){let r=this.openSubs.get(t);if(!r)return;let n=iD(e,"id"),i=r.alreadyHaveEvent?.(n);if(r.receivedEvent?.(this,n),i)return}try{let t=JSON.parse(e);switch(t[0]){case"EVENT":{let e=this.openSubs.get(t[1]),r=t[2];this.verifyEvent(r)&&iz(e.filters,r)&&e.onevent(r);return}case"COUNT":{let e=t[1],r=t[2],n=this.openCountRequests.get(e);n&&(n.resolve(r.count),this.openCountRequests.delete(e));return}case"EOSE":{let e=this.openSubs.get(t[1]);if(!e)return;e.receivedEose();return}case"OK":{let e=t[1],r=t[2],n=t[3],i=this.openEventPublishes.get(e);i&&(r?i.resolve(n):i.reject(Error(n)),this.openEventPublishes.delete(e));return}case"CLOSED":{let e=t[1],r=this.openSubs.get(e);if(!r)return;r.closed=!0,r.close(t[2]);return}case"NOTICE":this.onnotice(t[1]);return;case"AUTH":this.challenge=t[1],this._onauth?.(t[1]);return}}catch(e){return}}async send(e){if(!this.connectionPromise)throw Error("sending on closed connection");this.connectionPromise.then(()=>{this.ws?.send(e)})}async auth(e){if(!this.challenge)throw Error("can't perform auth, no challenge was received");let t=await e(iY(this.url,this.challenge)),r=new Promise((e,r)=>{this.openEventPublishes.set(t.id,{resolve:e,reject:r})});return this.send('["AUTH",'+JSON.stringify(t)+"]"),r}async publish(e){let t=new Promise((t,r)=>{this.openEventPublishes.set(e.id,{resolve:t,reject:r})});return this.send('["EVENT",'+JSON.stringify(e)+"]"),setTimeout(()=>{let t=this.openEventPublishes.get(e.id);t&&(t.reject(Error("publish timed out")),this.openEventPublishes.delete(e.id))},this.publishTimeout),t}async count(e,t){this.serial++;let r=t?.id||"count:"+this.serial,n=new Promise((e,t)=>{this.openCountRequests.set(r,{resolve:e,reject:t})});return this.send('["COUNT","'+r+'",'+JSON.stringify(e).substring(1)),n}subscribe(e,t){let r=this.prepareSubscription(e,t);return r.fire(),r}prepareSubscription(e,t){this.serial++;let r=t.id||"sub:"+this.serial,n=new iX(this,r,e,t);return this.openSubs.set(r,n),n}close(){this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,this.ws?.close()}_onmessage(e){this.incomingMessageQueue.enqueue(e.data),this.queueRunning||this.runQueue()}},iX=class{relay;id;closed=!1;eosed=!1;filters;alreadyHaveEvent;receivedEvent;onevent;oneose;onclose;eoseTimeout;eoseTimeoutHandle;constructor(e,t,r,n){this.relay=e,this.filters=r,this.id=t,this.alreadyHaveEvent=n.alreadyHaveEvent,this.receivedEvent=n.receivedEvent,this.eoseTimeout=n.eoseTimeout||e.baseEoseTimeout,this.oneose=n.oneose,this.onclose=n.onclose,this.onevent=n.onevent||(e=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,e)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,this.oneose?.())}close(e="closed by caller"){!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),this.onclose?.(e)}};try{n=WebSocket}catch{}try{i=WebSocket}catch{}var i0={};nr(i0,{BECH32_REGEX:()=>i3,Bech32MaxSize:()=>i2,NostrTypeGuard:()=>i1,decode:()=>i6,encodeBytes:()=>ot,naddrEncode:()=>oi,neventEncode:()=>on,noteEncode:()=>i7,nprofileEncode:()=>or,npubEncode:()=>i9,nsecEncode:()=>i4});var i1={isNProfile:e=>/^nprofile1[a-z\d]+$/.test(e||""),isNEvent:e=>/^nevent1[a-z\d]+$/.test(e||""),isNAddr:e=>/^naddr1[a-z\d]+$/.test(e||""),isNSec:e=>/^nsec1[a-z\d]{58}$/.test(e||""),isNPub:e=>/^npub1[a-z\d]{58}$/.test(e||""),isNote:e=>/^note1[a-z\d]+$/.test(e||""),isNcryptsec:e=>/^ncryptsec1[a-z\d]+$/.test(e||"")},i2=5e3,i3=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function i8(e){let t=new Uint8Array(4);return t[0]=e>>24&255,t[1]=e>>16&255,t[2]=e>>8&255,t[3]=255&e,t}function i6(e){let{prefix:t,words:r}=tZ.decode(e,i2),n=new Uint8Array(tZ.fromWords(r));switch(t){case"nprofile":{let e=i5(n);if(!e[0]?.[0])throw Error("missing TLV 0 for nprofile");if(32!==e[0][0].length)throw Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:ti(e[0][0]),relays:e[1]?e[1].map(e=>ns.decode(e)):[]}}}case"nevent":{let e=i5(n);if(!e[0]?.[0])throw Error("missing TLV 0 for nevent");if(32!==e[0][0].length)throw Error("TLV 0 should be 32 bytes");if(e[2]&&32!==e[2][0].length)throw Error("TLV 2 should be 32 bytes");if(e[3]&&4!==e[3][0].length)throw Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:ti(e[0][0]),relays:e[1]?e[1].map(e=>ns.decode(e)):[],author:e[2]?.[0]?ti(e[2][0]):void 0,kind:e[3]?.[0]?parseInt(ti(e[3][0]),16):void 0}}}case"naddr":{let e=i5(n);if(!e[0]?.[0])throw Error("missing TLV 0 for naddr");if(!e[2]?.[0])throw Error("missing TLV 2 for naddr");if(32!==e[2][0].length)throw Error("TLV 2 should be 32 bytes");if(!e[3]?.[0])throw Error("missing TLV 3 for naddr");if(4!==e[3][0].length)throw Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:ns.decode(e[0][0]),pubkey:ti(e[2][0]),kind:parseInt(ti(e[3][0]),16),relays:e[1]?e[1].map(e=>ns.decode(e)):[]}}}case"nsec":return{type:t,data:n};case"npub":case"note":return{type:t,data:ti(n)};default:throw Error(`unknown prefix ${t}`)}}function i5(e){let t={},r=e;for(;r.length>0;){let e=r[0],n=r[1],i=r.slice(2,2+n);if(r=r.slice(2+n),i.length<n)throw Error(`not enough data to read on TLV ${e}`);t[e]=t[e]||[],t[e].push(i)}return t}function i4(e){return ot("nsec",e)}function i9(e){return ot("npub",to(e))}function i7(e){return ot("note",to(e))}function oe(e,t){let r=tZ.toWords(t);return tZ.encode(e,r,i2)}function ot(e,t){return oe(e,t)}function or(e){return oe("nprofile",oo({0:[to(e.pubkey)],1:(e.relays||[]).map(e=>na.encode(e))}))}function on(e){let t;return void 0!==e.kind&&(t=i8(e.kind)),oe("nevent",oo({0:[to(e.id)],1:(e.relays||[]).map(e=>na.encode(e)),2:e.author?[to(e.author)]:[],3:t?[new Uint8Array(t)]:[]}))}function oi(e){let t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e.kind,!1),oe("naddr",oo({0:[na.encode(e.identifier)],1:(e.relays||[]).map(e=>na.encode(e)),2:[to(e.pubkey)],3:[new Uint8Array(t)]}))}function oo(e){let t=[];return Object.entries(e).reverse().forEach(([e,r])=>{r.forEach(r=>{let n=new Uint8Array(r.length+2);n.set([parseInt(e)],0),n.set([r.length],1),n.set(r,2),t.push(n)})}),tl(...t)}var os={};async function oa(e,t,r){let n=e instanceof Uint8Array?ti(e):e,i=ou(eK.getSharedSecret(n,"02"+t)),o=Uint8Array.from(tc(16)),s=na.encode(r),a=rL(i,o).encrypt(s),l=tM.encode(new Uint8Array(a)),u=tM.encode(new Uint8Array(o.buffer));return`${l}?iv=${u}`}async function ol(e,t,r){let n=e instanceof Uint8Array?ti(e):e,[i,o]=r.split("?iv="),s=ou(eK.getSharedSecret(n,"02"+t)),a=tM.decode(o),l=tM.decode(i),u=rL(s,a).decrypt(l);return ns.decode(u)}function ou(e){return e.slice(1,33)}nr(os,{decrypt:()=>ol,encrypt:()=>oa}),nr({},{NIP05_REGEX:()=>of,isNip05:()=>oc,isValid:()=>og,queryProfile:()=>op,searchDomain:()=>od,useFetchImplementation:()=>oh});var of=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,oc=e=>of.test(e||"");try{o=fetch}catch(e){}function oh(e){o=e}async function od(e,t=""){try{let r=`https://${e}/.well-known/nostr.json?name=${t}`,n=await o(r,{redirect:"manual"});if(200!==n.status)throw Error("Wrong response code");return(await n.json()).names}catch(e){return{}}}async function op(e){let t=e.match(of);if(!t)return null;let[,r="_",n]=t;try{let e=`https://${n}/.well-known/nostr.json?name=${r}`,t=await o(e,{redirect:"manual"});if(200!==t.status)throw Error("Wrong response code");let i=await t.json(),s=i.names[r];return s?{pubkey:s,relays:i.relays?.[s]}:null}catch(e){return null}}async function og(e,t){let r=await op(t);return!!r&&r.pubkey===e}function oy(e){let t,r;let n={reply:void 0,root:void 0,mentions:[],profiles:[],quotes:[]};for(let i=e.tags.length-1;i>=0;i--){let o=e.tags[i];if("e"===o[0]&&o[1]){let[e,i,s,a,l]=o,u={id:i,relays:s?[s]:[],author:l};if("root"===a){n.root=u;continue}if("reply"===a){n.reply=u;continue}if("mention"===a){n.mentions.push(u);continue}t?r=u:t=u,n.mentions.push(u);continue}if("q"===o[0]&&o[1]){let[e,t,r]=o;n.quotes.push({id:t,relays:r?[r]:[]})}if("p"===o[0]&&o[1]){n.profiles.push({pubkey:o[1],relays:o[2]?[o[2]]:[]});continue}}return n.root||(n.root=r||t||n.reply),n.reply||(n.reply=t||n.root),[n.reply,n.root].forEach(e=>{if(!e)return;let t=n.mentions.indexOf(e);if(-1!==t&&n.mentions.splice(t,1),e.author){let t=n.profiles.find(t=>t.pubkey===e.author);t&&t.relays&&(e.relays||(e.relays=[]),t.relays.forEach(t=>{e.relays?.indexOf(t)===-1&&e.relays.push(t)}),t.relays=e.relays)}}),n.mentions.forEach(e=>{if(e.author){let t=n.profiles.find(t=>t.pubkey===e.author);t&&t.relays&&(e.relays||(e.relays=[]),t.relays.forEach(t=>{-1===e.relays.indexOf(t)&&e.relays.push(t)}),t.relays=e.relays)}}),n}nr({},{parse:()=>oy}),nr({},{fetchRelayInformation:()=>ow,useFetchImplementation:()=>ob});try{s=fetch}catch{}function ob(e){s=e}async function ow(e){return await (await fetch(e.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()}function om(e){let t=0;for(let r=0;r<64;r+=8){let n=parseInt(e.substring(r,r+8),16);if(0===n)t+=32;else{t+=Math.clz32(n);break}}return t}function oE(e,t){let r=0,n=e,i=["nonce","0",t.toString()];for(n.tags.push(i);;){let e=Math.floor(new Date().getTime()/1e3);if(e!==n.created_at&&(r=0,n.created_at=e),i[1]=(++r).toString(),n.id=ov(n),om(n.id)>=t)break}return n}function ov(e){return ti(tk(na.encode(JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content]))))}function ox(e,t,r,n){return nm({kind:nL,tags:[...e.tags??[],["e",t.id,r],["p",t.pubkey]],content:""===e.content?"":JSON.stringify(t),created_at:e.created_at},n)}function oA(e){let t,r;if(e.kind===nL){for(let n=e.tags.length-1;n>=0&&(void 0===t||void 0===r);n--){let i=e.tags[n];i.length>=2&&("e"===i[0]&&void 0===t?t=i:"p"===i[0]&&void 0===r&&(r=i))}if(void 0!==t)return{id:t[1],relays:[t[2],r?.[2]].filter(e=>"string"==typeof e),author:r?.[1]}}}function o_(e,{skipVerification:t}={}){let r;let n=oA(e);if(void 0!==n&&""!==e.content){try{r=JSON.parse(e.content)}catch(e){return}if(r.id===n.id&&(t||nE(r)))return r}}nr({},{fastEventHash:()=>ov,getPow:()=>om,minePow:()=>oE}),nr({},{finishRepostEvent:()=>ox,getRepostedEvent:()=>o_,getRepostedEventPointer:()=>oA}),nr({},{NOSTR_URI_REGEX:()=>oB,parse:()=>oC,test:()=>ok});var oB=RegExp(`nostr:(${i3.source})`);function ok(e){return"string"==typeof e&&RegExp(`^${oB.source}$`).test(e)}function oC(e){let t=e.match(RegExp(`^${oB.source}$`));if(!t)throw Error(`Invalid Nostr URI: ${e}`);return{uri:t[0],value:t[1],decoded:i6(t[1])}}function oI(e,t,r){let n=t.tags.filter(e=>e.length>=2&&("e"===e[0]||"p"===e[0]));return nm({...e,kind:nR,tags:[...e.tags??[],...n,["e",t.id],["p",t.pubkey]],content:e.content??"+"},r)}function oS(e){let t,r;if(e.kind===nR){for(let n=e.tags.length-1;n>=0&&(void 0===t||void 0===r);n--){let i=e.tags[n];i.length>=2&&("e"===i[0]&&void 0===t?t=i:"p"===i[0]&&void 0===r&&(r=i))}if(void 0!==t&&void 0!==r)return{id:t[1],relays:[t[2],r[2]].filter(e=>void 0!==e),author:r[1]}}}nr({},{finishReactionEvent:()=>oI,getReactedEventPointer:()=>oS}),nr({},{matchAll:()=>oU,regex:()=>oO,replaceAll:()=>oN});var oO=()=>RegExp(`\\b${oB.source}\\b`,"g");function*oU(e){for(let t of e.matchAll(oO()))try{let[e,r]=t;yield{uri:e,value:r,decoded:i6(r),start:t.index,end:t.index+e.length}}catch(e){}}function oN(e,t){return e.replaceAll(oO(),(e,r)=>t({uri:e,value:r,decoded:i6(r)}))}nr({},{channelCreateEvent:()=>oL,channelHideMessageEvent:()=>o$,channelMessageEvent:()=>oT,channelMetadataEvent:()=>oR,channelMuteUserEvent:()=>oF});var oL=(e,t)=>{let r;if("object"==typeof e.content)r=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;r=e.content}return nm({kind:nH,tags:[...e.tags??[]],content:r,created_at:e.created_at},t)},oR=(e,t)=>{let r;if("object"==typeof e.content)r=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;r=e.content}return nm({kind:nM,tags:[["e",e.channel_create_event_id],...e.tags??[]],content:r,created_at:e.created_at},t)},oT=(e,t)=>{let r=[["e",e.channel_create_event_id,e.relay_url,"root"]];return e.reply_to_channel_message_event_id&&r.push(["e",e.reply_to_channel_message_event_id,e.relay_url,"reply"]),nm({kind:nq,tags:[...r,...e.tags??[]],content:e.content,created_at:e.created_at},t)},o$=(e,t)=>{let r;if("object"==typeof e.content)r=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;r=e.content}return nm({kind:nj,tags:[["e",e.channel_message_event_id],...e.tags??[]],content:r,created_at:e.created_at},t)},oF=(e,t)=>{let r;if("object"==typeof e.content)r=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;r=e.content}return nm({kind:nz,tags:[["p",e.pubkey_to_mute],...e.tags??[]],content:r,created_at:e.created_at},t)};nr({},{EMOJI_SHORTCODE_REGEX:()=>oP,matchAll:()=>oM,regex:()=>oH,replaceAll:()=>oq});var oP=/:(\w+):/,oH=()=>RegExp(`\\B${oP.source}\\B`,"g");function*oM(e){for(let t of e.matchAll(oH()))try{let[e,r]=t;yield{shortcode:e,name:r,start:t.index,end:t.index+e.length}}catch(e){}}function oq(e,t){return e.replaceAll(oH(),(e,r)=>t({shortcode:e,name:r}))}nr({},{useFetchImplementation:()=>oj,validateGithub:()=>oz});try{a=fetch}catch{}function oj(e){a=e}async function oz(e,t,r){try{return await (await a(`https://gist.github.com/${t}/${r}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch(e){return!1}}var oD={};nr(oD,{decrypt:()=>o2,encrypt:()=>o1,getConversationKey:()=>oZ,v2:()=>o3});var oV=1,oK=65535;function oZ(e,t){return r4(tk,eK.getSharedSecret(e,"02"+t).subarray(1,33),"nip44-v2")}function oW(e,t){let r=ne(tk,e,t,76);return{chacha_key:r.subarray(0,32),chacha_nonce:r.subarray(32,44),hmac_key:r.subarray(44,76)}}function oG(e){if(!Number.isSafeInteger(e)||e<1)throw Error("expected positive integer");if(e<=32)return 32;let t=1<<Math.floor(Math.log2(e-1))+1,r=t<=256?32:t/8;return r*(Math.floor((e-1)/r)+1)}function oY(e){if(!Number.isSafeInteger(e)||e<oV||e>oK)throw Error("invalid plaintext size: must be between 1 and 65535 bytes");let t=new Uint8Array(2);return new DataView(t.buffer).setUint16(0,e,!1),t}function oJ(e){let t=na.encode(e),r=t.length;return tl(oY(r),t,new Uint8Array(oG(r)-r))}function oQ(e){let t=new DataView(e.buffer).getUint16(0),r=e.subarray(2,2+t);if(t<oV||t>oK||r.length!==t||e.length!==2+oG(t))throw Error("invalid padding");return ns.decode(r)}function oX(e,t,r){if(32!==r.length)throw Error("AAD associated data must be 32 bytes");return r5(tk,e,tl(r,t))}function o0(e){let t;if("string"!=typeof e)throw Error("payload must be a valid string");let r=e.length;if(r<132||r>87472)throw Error("invalid payload length: "+r);if("#"===e[0])throw Error("unknown encryption version");try{t=tM.decode(e)}catch(e){throw Error("invalid base64: "+e.message)}let n=t.length;if(n<99||n>65603)throw Error("invalid data length: "+n);let i=t[0];if(2!==i)throw Error("unknown encryption version "+i);return{nonce:t.subarray(1,33),ciphertext:t.subarray(33,-32),mac:t.subarray(-32)}}function o1(e,t,r=tc(32)){let{chacha_key:n,chacha_nonce:i,hmac_key:o}=oW(t,r),s=rQ(n,i,oJ(e)),a=oX(o,s,r);return tM.encode(tl(new Uint8Array([2]),r,s,a))}function o2(e,t){let{nonce:r,ciphertext:n,mac:i}=o0(e),{chacha_key:o,chacha_nonce:s,hmac_key:a}=oW(t,r);if(!t5(oX(a,n,r),i))throw Error("invalid MAC");return oQ(rQ(o,s,n))}var o3={utils:{getConversationKey:oZ,calcPaddedLen:oG},encrypt:o1,decrypt:o2};function o8(e){let{pathname:t,searchParams:r}=new URL(e),n=t,i=r.get("relay"),o=r.get("secret");if(!n||!i||!o)throw Error("invalid connection string");return{pubkey:n,relay:i,secret:o}}async function o6(e,t,r){let n={method:"pay_invoice",params:{invoice:r}},i=await oa(t,e,JSON.stringify(n));return nm({kind:id,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e]]},t)}nr({},{makeNwcRequestEvent:()=>o6,parseConnectionString:()=>o8});var o5={};nr(o5,{getZapEndpoint:()=>o9,makeZapReceipt:()=>st,makeZapRequest:()=>o7,useFetchImplementation:()=>o4,validateZapRequest:()=>se});try{l=fetch}catch{}function o4(e){l=e}async function o9(e){try{let t="",{lud06:r,lud16:n}=JSON.parse(e.content);if(r){let{words:e}=tZ.decode(r,1e3),n=tZ.fromWords(e);t=ns.decode(n)}else{if(!n)return null;let[e,r]=n.split("@");t=new URL(`/.well-known/lnurlp/${e}`,`https://${r}`).toString()}let i=await l(t),o=await i.json();if(o.allowsNostr&&o.nostrPubkey)return o.callback}catch(e){}return null}function o7({profile:e,event:t,amount:r,relays:n,comment:i=""}){if(!r)throw Error("amount not given");if(!e)throw Error("profile not given");let o={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e],["amount",r.toString()],["relays",...n]]};return t&&o.tags.push(["e",t]),o}function se(e){let t;try{t=JSON.parse(e)}catch(e){return"Invalid zap request JSON."}if(!no(t))return"Zap request is not a valid Nostr event.";if(!nE(t))return"Invalid signature on zap request.";let r=t.tags.find(([e,t])=>"p"===e&&t);if(!r)return"Zap request doesn't have a 'p' tag.";if(!r[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let n=t.tags.find(([e,t])=>"e"===e&&t);return n&&!n[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":t.tags.find(([e,t])=>"relays"===e&&t)?null:"Zap request doesn't have a 'relays' tag."}function st({zapRequest:e,preimage:t,bolt11:r,paidAt:n}){let i=JSON.parse(e),o=i.tags.filter(([e])=>"e"===e||"p"===e||"a"===e),s={kind:9735,created_at:Math.round(n.getTime()/1e3),content:"",tags:[...o,["P",i.pubkey],["bolt11",r],["description",e]]};return t&&s.tags.push(["preimage",t]),s}nr({},{createRumor:()=>sl,createSeal:()=>su,createWrap:()=>sf,unwrapEvent:()=>sd,unwrapManyEvents:()=>sp,wrapEvent:()=>sc,wrapManyEvents:()=>sh});var sr=172800,sn=()=>Math.round(Date.now()/1e3),si=()=>Math.round(sn()-Math.random()*sr),so=(e,t)=>oZ(e,t),ss=(e,t,r)=>o1(JSON.stringify(e),so(t,r)),sa=(e,t)=>JSON.parse(o2(e.content,so(t,e.pubkey)));function sl(e,t){let r={created_at:sn(),content:"",tags:[],...e,pubkey:nw(t)};return r.id=ng(r),r}function su(e,t,r){return nm({kind:n$,content:ss(e,t,r),created_at:si(),tags:[]},t)}function sf(e,t){let r=nb();return nm({kind:nV,content:ss(e,r,t),created_at:si(),tags:[["p",t]]},r)}function sc(e,t,r){return sf(su(sl(e,t),t,r),r)}function sh(e,t,r){if(!r||0===r.length)throw Error("At least one recipient is required.");let n=nw(t),i=[sc(e,t,n)];return r.forEach(r=>{i.push(sc(e,t,r))}),i}function sd(e,t){let r=sa(e,t);return sa(r,t)}function sp(e,t){let r=[];return e.forEach(e=>{r.push(sd(e,t))}),r.sort((e,t)=>e.created_at-t.created_at),r}nr({},{getToken:()=>sy,hashPayload:()=>sA,unpackEventFromToken:()=>sw,validateEvent:()=>sB,validateEventKind:()=>sE,validateEventMethodTag:()=>sx,validateEventPayloadTag:()=>s_,validateEventTimestamp:()=>sm,validateEventUrlTag:()=>sv,validateToken:()=>sb});var sg="Nostr ";async function sy(e,t,r,n=!1,i){let o={kind:iy,tags:[["u",e],["method",t]],created_at:Math.round(new Date().getTime()/1e3),content:""};i&&o.tags.push(["payload",sA(i)]);let s=await r(o);return(n?sg:"")+tM.encode(na.encode(JSON.stringify(s)))}async function sb(e,t,r){let n=await sw(e).catch(e=>{throw e});return await sB(n,t,r).catch(e=>{throw e})}async function sw(e){if(!e)throw Error("Missing token");e=e.replace(sg,"");let t=ns.decode(tM.decode(e));if(!t||0===t.length||!t.startsWith("{"))throw Error("Invalid token");return JSON.parse(t)}function sm(e){return!!e.created_at&&Math.round(new Date().getTime()/1e3)-e.created_at<60}function sE(e){return e.kind===iy}function sv(e,t){let r=e.tags.find(e=>"u"===e[0]);return!!r&&r.length>0&&r[1]===t}function sx(e,t){let r=e.tags.find(e=>"method"===e[0]);return!!r&&r.length>0&&r[1].toLowerCase()===t.toLowerCase()}function sA(e){return ti(tk(na.encode(JSON.stringify(e))))}function s_(e,t){let r=e.tags.find(e=>"payload"===e[0]);if(!r)return!1;let n=sA(t);return r.length>0&&r[1]===n}async function sB(e,t,r,n){if(!nE(e))throw Error("Invalid nostr event, signature invalid");if(!sE(e))throw Error("Invalid nostr event, kind invalid");if(!sm(e))throw Error("Invalid nostr event, created_at timestamp invalid");if(!sv(e,t))throw Error("Invalid nostr event, url tag invalid");if(!sx(e,r))throw Error("Invalid nostr event, method tag invalid");if(n&&"object"==typeof n&&Object.keys(n).length>0&&!s_(e,n))throw Error("Invalid nostr event, payload tag does not match request body hash");return!0}}}]);